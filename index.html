<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="青春无悔不死">
<meta property="og:type" content="website">
<meta property="og:title" content="mlger">
<meta property="og:url" content="https://example.com/index.html">
<meta property="og:site_name" content="mlger">
<meta property="og:description" content="青春无悔不死">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Lg">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>mlger</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">mlger</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2024/03/02/README/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/03/02/README/" class="post-title-link" itemprop="url">README</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-03-02 09:43:51" itemprop="dateCreated datePublished" datetime="2024-03-02T09:43:51+08:00">2024-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-22 23:48:51" itemprop="dateModified" datetime="2024-01-22T23:48:51+08:00">2024-01-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>​ 本站采用 hexo 架构，部署在 github pages 上，采用 github 作为图床。建议在能够流畅访问 github 的网络环境下浏览。</p>
<p><img src="https://raw.githubusercontent.com/mlger/Pict/main/202307042122433.png" /></p>
<p>​ 看见这幅美丽的画了吗？看见了说明你能看见这幅画 (bushi)。</p>
<p>​ 关于左边的这个抽象的双 tags 旋转动画，我也在 diss 它，有时间再把它 ban 掉了。</p>
<p>维修计划：</p>
<ul>
<li>缩进调整</li>
<li>关闭 tags 动画</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2024/03/07/%E5%A4%A7%E4%BA%8C%E4%B8%8B%E7%9B%B8%E5%85%B3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/03/07/%E5%A4%A7%E4%BA%8C%E4%B8%8B%E7%9B%B8%E5%85%B3/" class="post-title-link" itemprop="url">大二下相关</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-03-07 14:35:00 / 修改时间：14:35:33" itemprop="dateCreated datePublished" datetime="2024-03-07T14:35:00+08:00">2024-03-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/todo-list/" itemprop="url" rel="index"><span itemprop="name">todo-list</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一index">一、index</h4>
<h5 id="软工ii">1. 软工II</h5>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://p.internal-paas.seec.seecoder.cn/">seec门户系统</a></p></li>
<li><p><a href="developer.internal-paas.seec.seecoder.cn">developer系统</a></p></li>
<li><p>作业相关</p>
<ul>
<li><p><a href="%5B‌⁤‌⁢﻿⁤⁡‬⁣⁤﻿⁢⁢‍⁣‍⁢‬⁣⁡⁡⁣‍‍⁢⁢‍⁤⁣⁣⁢⁢⁣‍⁣⁢⁣﻿⁢Developer使用说明%20-%20飞书云文档%20(feishu.cn)%5D(https://nqq5jc94uf.feishu.cn/docx/Mo8UdFKMHoBcxkxzTkQcRo8mnSe)">Developer使用说明</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://nqq5jc94uf.feishu.cn/docx/T3UedRuVHozcwMxgBe9cXxqRnjd">文档Lab1-项目启动文档</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://nqq5jc94uf.feishu.cn/docx/Wsdud2WMKol0qZxZViVcBGXfnSc">文档Lab2-用例文档</a></p></li>
<li><p><a href="%5B‬⁢⁤‍﻿‬⁣‌⁢﻿⁣⁣‌‍‍‍⁢﻿﻿⁢‬⁤‍⁡⁤⁢⁣⁤⁢⁤⁤⁤‍⁡‍‬代码Lab1-熟悉项目%20-%20飞书云文档%20(feishu.cn)%5D(https://nqq5jc94uf.feishu.cn/docx/V9fFdlZMUol8xRxrYrVcPBEInkb)">代码Lab1-熟悉项目</a></p></li>
</ul></li>
</ul>
<h5 id="compiler">2. Compiler</h5>
<ul>
<li><a target="_blank" rel="noopener" href="http://docs.compilers.cpl.icu/#/">Compiler@NJU-SE (cpl.icu)</a></li>
<li><a target="_blank" rel="noopener" href="https://oj.compilers.cpl.icu/#/">Online Judge (cpl.icu)</a></li>
</ul>
<h5 id="数据管理基础-操作系统">3. 数据管理基础 / 操作系统</h5>
<ul>
<li><a target="_blank" rel="noopener" href="https://selearning.nju.edu.cn/login/index.php">教学支持系统: 登录本网站 (nju.edu.cn)</a></li>
</ul>
<h5 id="ml">4. ML</h5>
<ul>
<li>https://www.lamda.nju.edu.cn/ML2024Spring/</li>
</ul>
<h5 id="nlp">5. NLP</h5>
<h5 id="华为精英挑战赛">6. 华为精英挑战赛</h5>
<h2 id="时间节点"><strong>【时间节点】</strong></h2>
<p>● 3月7日 9：00 公布初赛赛题，大赛网站开放赛题、赛题包下载</p>
<p>● 3月7日 9：00 公布练习数据集，开启线上训练赛</p>
<p>● 3月7日 9：00 - 3月22日 18：00 初赛练习阶段</p>
<p>● 3月22日 18：00 - 3月23日 9：00 关闭在线训练作品提交窗口</p>
<p>● 3月23日 9：00 大赛网站更新正式赛的数据集并恢复提交</p>
<p>● 3月23日 9：00 - 3月23日 18：00 初赛参赛作品提交阶段</p>
<p>● 3月23日 18：00 初赛截止提交</p>
<p>● 3月23日 18：00 - 3月24日 20：00 系统评阅</p>
<p>● 3月24日 20：00 公示初赛获奖名单及成绩</p>
<p>● 3月25日 20：00 公布最终初赛获奖名单及成绩</p>
<h4 id="二最近活动">二、最近活动</h4>
<table>
<thead>
<tr class="header">
<th>活动</th>
<th>时间/deadline</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>花旗杯</td>
<td>三月下旬</td>
</tr>
<tr class="even">
<td>大创数据集采集</td>
<td>三月中旬</td>
</tr>
<tr class="odd">
<td>华为精英挑战赛</td>
<td>03/07 - 03/22</td>
</tr>
<tr class="even">
<td>华为赛事线下交流会</td>
<td>2024年3月9日周六 13:30-16:00</td>
</tr>
<tr class="odd">
<td>2024华为校园公开课</td>
<td>2024年3月12日周二16:00-18:00</td>
</tr>
</tbody>
</table>
<h4 id="三任务链">三、任务链</h4>
<table>
<thead>
<tr class="header">
<th>阶段一</th>
<th>进度</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>花旗杯 信息采集模块</td>
<td>coding完毕，差跑程序</td>
</tr>
<tr class="even">
<td>文档Lab2</td>
<td></td>
</tr>
<tr class="odd">
<td>数据管理基础作业1 2024年03月12日 Tuesday 00:00</td>
<td></td>
</tr>
<tr class="even">
<td>数据管理基础作业2 2024年03月15日 Friday 00:00</td>
<td></td>
</tr>
<tr class="odd">
<td>大创数据集录制</td>
<td>432/3000</td>
</tr>
<tr class="even">
<td><strong>阶段二</strong></td>
<td></td>
</tr>
<tr class="odd">
<td>华为精英挑战赛</td>
<td></td>
</tr>
<tr class="even">
<td>ML 数学基础学习</td>
<td></td>
</tr>
<tr class="odd">
<td>Compiler 第一章知识学习</td>
<td></td>
</tr>
<tr class="even">
<td><strong>阶段三</strong></td>
<td></td>
</tr>
<tr class="odd">
<td>花旗杯 绘图模块</td>
<td></td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2024/01/22/%E5%85%B3%E4%BA%8E%E6%8A%91%E9%83%81%E7%97%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/22/%E5%85%B3%E4%BA%8E%E6%8A%91%E9%83%81%E7%97%87/" class="post-title-link" itemprop="url">关于抑郁症</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-01-22 23:00:00 / 修改时间：23:34:14" itemprop="dateCreated datePublished" datetime="2024-01-22T23:00:00+08:00">2024-01-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%91%E9%83%81%E7%97%87/" itemprop="url" rel="index"><span itemprop="name">抑郁症</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          Here's something encrypted, password is required to continue reading.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2024/01/22/%E5%85%B3%E4%BA%8E%E6%8A%91%E9%83%81%E7%97%87/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2024/01/20/%E8%B5%B0%E5%9C%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%B6%E5%8C%BA%E9%87%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/20/%E8%B5%B0%E5%9C%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%B6%E5%8C%BA%E9%87%8C/" class="post-title-link" itemprop="url">走在自己的时区里</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2024-01-20T00:00:00+08:00">2024-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-22 23:15:11" itemprop="dateModified" datetime="2024-01-22T23:15:11+08:00">2024-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%97%E6%AD%8C/" itemprop="url" rel="index"><span itemprop="name">诗歌</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em>作者：来源不详</em></p>
<p>在时间上，纽约走在加州前面三个小时，</p>
<p>但加州并没有变慢。</p>
<p>有人22岁就毕业了，</p>
<p>但等了五年才找到好工作！</p>
<p>有人25岁就当上了CEO，</p>
<p>却在50岁去世了。</p>
<p>也有人直到50岁才当上CEO，</p>
<p>最后活到90岁。</p>
<p>有人依然单身，</p>
<p>而别人却早已结婚。</p>
<p>奥巴马55岁退任总统，</p>
<p>而川普却是70岁才开始当。</p>
<p>世上每个人都有自己的发展时区。</p>
<p>身边有些人看似走在你前面，</p>
<p>也有人看似走在你后面。</p>
<p>但其实每个人在自己的时区有自己的步程。</p>
<p>不用嫉妒或嘲笑他们。</p>
<p>他们都在自己的时区，你在你的！</p>
<p>所以，别放松。</p>
<p>你没有落后，</p>
<p>你没有领先。</p>
<p>在命运为你安排的属于你自己的时区里，一切都非常准时。</p>
<p>好，别忘了危机与奋斗</p>
<p>难，别忘了梦想与坚持</p>
<p>忙，别忘了读书与锻炼</p>
<p>人生，就是一场长跑</p>
<p>New York is 3 hours ahead of California,</p>
<p>but it does not make California slow.</p>
<p>Someone graduated at the age of 22,</p>
<p>but waited 5 years before securing a good job!</p>
<p>Someone became a CEO at 25,</p>
<p>and died at 50.</p>
<p>While another became a CEO at 50,</p>
<p>and lived to 90 years.</p>
<p>Someone is still single,</p>
<p>while someone else got married.</p>
<p>Obama retires at 55,</p>
<p>but Trump starts at 70.</p>
<p>Absolutely everyone in this world works based on their Time Zone.</p>
<p>People around you might seem to go ahead of you,</p>
<p>some might seem to be behind you.</p>
<p>But everyone is running their own RACE, in their own TIME.</p>
<p>Don't envy them or mock them.</p>
<p>They are in their TIME ZONE, and you are in yours!</p>
<p>So, Never Give up</p>
<p>You're not LATE.</p>
<p>You're not EARLY.</p>
<p>You are very much ON TIME, and in your TIME ZONE Destiny set up for you.</p>
<p>Well, Don't forget the crisis and the struggle.</p>
<p>Hard. Don't forget the dream and the persistence.</p>
<p>Busy, Don't forget to read and exercise</p>
<p>Life is a long run</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2023/12/26/%E8%B0%A2%E5%B8%8C%E4%BB%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C07-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/26/%E8%B0%A2%E5%B8%8C%E4%BB%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C07-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" class="post-title-link" itemprop="url">谢希仁计算机网络07-网络安全</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-12-26 15:07:00 / 修改时间：15:07:29" itemprop="dateCreated datePublished" datetime="2023-12-26T15:07:00+08:00">2023-12-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%BD%91/" itemprop="url" rel="index"><span itemprop="name">计网</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          Here's something encrypted, password is required to continue reading.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/12/26/%E8%B0%A2%E5%B8%8C%E4%BB%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C07-%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2023/12/04/%E6%9C%AA%E9%80%89%E6%8B%A9%E7%9A%84%E8%B7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/04/%E6%9C%AA%E9%80%89%E6%8B%A9%E7%9A%84%E8%B7%AF/" class="post-title-link" itemprop="url">未选择的路</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-12-04 20:31:00" itemprop="dateCreated datePublished" datetime="2023-12-04T20:31:00+08:00">2023-12-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-22 23:20:13" itemprop="dateModified" datetime="2024-01-22T23:20:13+08:00">2024-01-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%97%E6%AD%8C/" itemprop="url" rel="index"><span itemprop="name">诗歌</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em>作者：罗伯特·弗罗斯特</em></p>
<p>黄色的树林里分出两条路，</p>
<p>可惜我不能同时去涉足，</p>
<p>我在那路口久久伫立，</p>
<p>我向着一条路极目望去，</p>
<p>直到它消失在丛林深处。</p>
<p>​</p>
<p>但我却选了另外一条路，</p>
<p>它荒草萋萋，十分幽寂，</p>
<p>显得更诱人、更美丽；</p>
<p>虽然在这两条小路上，</p>
<p>都很少留下旅人的足迹；</p>
<p>​</p>
<p>虽然那天清晨落叶满地，</p>
<p>两条路都未经脚印污染。</p>
<p>呵，留下一条路等改日再见！</p>
<p>但我知道路径延绵无尽头，</p>
<p>恐怕我难以再回返。</p>
<p>​</p>
<p>也许多少年后在某个地方，</p>
<p>我将轻声叹息把往事回顾：</p>
<p>一片树林里分出两条路，</p>
<p>而我选了人迹更少的一条，</p>
<p>从此决定了我一生的道路。</p>
<hr />
<h5 id="the-road-not-taken">The Road Not Taken</h5>
<p>Two roads diverged in a yellow wood,</p>
<p>And sorry I could not travel both</p>
<p>And be one traveler, long I stood</p>
<p>And looked down one as far as I could</p>
<p>To where it bent in the undergrowth;</p>
<p>​</p>
<p>Then took the other, as just as fair,</p>
<p>And having perhaps the better claim,</p>
<p>Because it was grassy and wanted wear;</p>
<p>Though as for that the passing there</p>
<p>Had worn them really about the same,</p>
<p>​</p>
<p>And both that morning equally lay</p>
<p>In leaves no step had trodden black.</p>
<p>Oh, I kept the first for another day!</p>
<p>Yet knowing how way leads on to way,</p>
<p>I doubted if I should ever come back.</p>
<p>​</p>
<p>I shall be telling this with a sigh</p>
<p>Somewhere ages and ages hence:</p>
<p>Two roads diverged in a wood,and I—</p>
<p>I took the one less traveled by,</p>
<p>And that has made all the difference.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2023/11/27/%E7%BA%BF%E4%BB%A3%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%8B%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/27/%E7%BA%BF%E4%BB%A3%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%8B%EF%BC%89/" class="post-title-link" itemprop="url">线性代数笔记（下）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-11-27 09:50:00" itemprop="dateCreated datePublished" datetime="2023-11-27T09:50:00+08:00">2023-11-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-09 21:09:43" itemprop="dateModified" datetime="2023-12-09T21:09:43+08:00">2023-12-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BA%BF%E4%BB%A3/" itemprop="url" rel="index"><span itemprop="name">线代</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          Here's something encrypted, password is required to continue reading.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/11/27/%E7%BA%BF%E4%BB%A3%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%8B%EF%BC%89/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2023/11/25/%E8%B0%A2%E5%B8%8C%E4%BB%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C06-%E5%BA%94%E7%94%A8%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/25/%E8%B0%A2%E5%B8%8C%E4%BB%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C06-%E5%BA%94%E7%94%A8%E5%B1%82/" class="post-title-link" itemprop="url">谢希仁计算机网络06-应用层</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-11-25 10:21:00" itemprop="dateCreated datePublished" datetime="2023-11-25T10:21:00+08:00">2023-11-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-05 16:21:49" itemprop="dateModified" datetime="2024-01-05T16:21:49+08:00">2024-01-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%BD%91/" itemprop="url" rel="index"><span itemprop="name">计网</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>应用层许多协议都是基于<strong>客户服务器方式</strong>。即便是 P2P 实质上也是一种特殊的客户服务器方式，客户 (clinet) 和服务器 (server) 都是指通信中涉及的两个<strong>应用进程</strong>。</p>
<h4 id="域名系统-dns">6.1 域名系统 DNS</h4>
<h5 id="概述">6.1.1 概述</h5>
<p>​ 域名系统 DNS 能把互联网上的主机名字转换为 IP 地址。互联网采用层次树状结构的命名方法，并使用分布式的域名系统 DNS。DNS 使大多数名字都在本地进行<strong>解析 (resolve)</strong>，仅少量解析需要在互联网上进行通信。</p>
<p>​ 域名到 IP 地址的解析是由分布在互联网上的许多<strong>域名服务器程序</strong>共同完成的，人们也常讲运行域名服务器程序的机器称为<strong>域名服务器</strong>。</p>
<p>​ 域名解析的请求以 UDP 用户数据报的方式进行传输。具体传输路径待后续探讨。</p>
<h5 id="互联网域名结构">6.1.2 互联网域名结构</h5>
<p>​ 互联网采用层次树状结构进行命名，任何一个连接在互联网上的主机或路由器，都有一个唯一的<strong>层次结构的名字</strong>，即<strong>域名 (domain name)</strong>。域还可以划分为子域，这样就形成了顶级域、二级域、三级域等等。每个域名由<strong>标号 (label)</strong> 序列组成，各标号间用<strong>点</strong>隔开，</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123095017782.png" alt="image-20231123095017782" /><figcaption aria-hidden="true">image-20231123095017782</figcaption>
</figure>
<ul>
<li>每个标号不超过 63 字符。</li>
<li>不区分大小写。</li>
<li>多标号组成完整域名不超过 255 字符。</li>
</ul>
<p>​ 顶级域名分为四大类：</p>
<ul>
<li><strong>国家顶级域名 nTLD</strong>：如 cn 表示中国，us 表示美国等等，又常记为 ccTLD (country-code)。</li>
<li><strong>通用顶级域名 gTLD</strong>：截至 2006 年 12 月，已达 20 个。公司企业 com，网络服务机构 net，非营利性组织 org，国际组织 int，美国专用教育机构 edu，美国政府部门 gov，美国军事部门 mil，等等。</li>
<li><strong>基础结构域名</strong>：又称反向域名，只有一个 arpa，用于反向域名解析。</li>
<li><strong>新顶级域名 New gTld</strong>：2011 年正式批准，任何公司机构都有权申请。</li>
</ul>
<p>​ 二级域名划分为<strong>类别域名</strong>和<strong>行政区域名</strong>两大类。</p>
<ul>
<li>类别域名：7 个，科研机构 ac，工商金融等企业 com，教育机构 edu，政府机构 gov，国防机构 mil，互联网服务机构 net，非营利性组织 org。</li>
<li>行政区域名：34 个，如江苏省 js，北京 bj，等等。</li>
</ul>
<p>​ 一般采用域名树来表示互联网的域名系统，其中根节点无名，如图：</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123095841535.png" alt="image-20231123095841535" /><figcaption aria-hidden="true">image-20231123095841535</figcaption>
</figure>
<h5 id="域名服务器">6.1.3 域名服务器</h5>
<p>​ 一个服务器管辖的范围叫做<strong>区 (zone)</strong>，一个区中所有节点必须联通。每一个区设置相应的<strong>权限域名服务器 (authoritative name server)</strong>，用于保存该区主机域名到 IP 的映射。</p>
<p>​ 按照所起作用，可将域名服务器划分为四种不同类型：</p>
<ul>
<li><strong>根域名服务器 (root name server)</strong>：最高层次服务器，也是最重要的服务器。全世界 588 (2016 年 2 月) 个地点安装的跟服务器，只有 13 个域名，a.rootservers.net，...，m.rootservers.net。这表明，互联网是由 13 套装置构成这 13 组域名服务器。每一地点的根服务器往往由多台机器组成。根域名服务器采用<strong>任播 (anycast)</strong> 技术，DNS 客户查询时，路由器就能找到最近的一个根域名服务器。</li>
<li><strong>顶级域名服务器</strong>：管理在该服务器注册的所有二级域名，收到 DNS 请求时给出回答。</li>
<li><strong>权限域名服务器</strong>：负责一个区的域名服务器。当一个权限域名服务器还不能给出回答时，便回复客户下一步应当请求哪个服务器。</li>
<li><strong>本地域名服务器</strong>：并不属于服务器层次结构。主机发出 DNS 请求时，先发往本地服务器。本地服务器若无法作出回应，则继续作为客户方向其他根域名服务器发出查询报文，得到结果后再将回复发送给主机。</li>
</ul>
<p>​ 主机向本地服务器查询一般采用<strong>递归查询</strong>，即逐步深入。而本地服务器向根域名服务器查询采用<strong>迭代查询</strong>，即遍历询问。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123101430625.png" alt="image-20231123101430625" /><figcaption aria-hidden="true">image-20231123101430625</figcaption>
</figure>
<p>​ 为提高可靠性，DNS 域名服务器还将数据复制到几个域名服务器保存，其中一个为<strong>主域名服务器 (master name server)</strong>，其余为<strong>辅助域名服务器 (secondary name sever)</strong>。</p>
<p>​ 为提高效率，域名服务器广泛使用<strong>高速缓存</strong>，存放最近查询过的域名以及从何处获得域名映射信息的记录。域名服务器为每项内容设置计时器并处理超时项。</p>
<h4 id="文件传送协议">6.2 文件传送协议</h4>
<h5 id="概述-1">6.2.1 概述</h5>
<p>​ <strong>文件传送协议 FTP (File Transfer Protocol)</strong> 提供交互式访问，允许客户指明文件类型与格式，并允许文件具有存取权限。屏蔽系统细节，适合于在异构网络中任意计算机间传送文件。</p>
<p>​ 基于 TCP 的 FTP 和基于 UDP 的 TFTP 是文件共享协议的一大类，即<strong>复制整个文件</strong>，欲修改文件，只能修改副本，然后将整个副本传回。</p>
<p>​ 另一大类是<strong>联机访问 (on-line access)</strong>。由操作系统提供对远地文件进行访问的服务，如同对本地文件访问一样。操作系统提供<strong>透明存取</strong>。透明存取优点为更改远地文件时无需作过多改动。属于该协议的有<strong>网络文件系统 NFS (Network File System)</strong>。</p>
<h5 id="ftp-工作原理">6.2.2 FTP 工作原理</h5>
<p>​ 采用客户服务器方式。FTP 服务器进程由两大部分组成：一个负责接收请求的<strong>主进程</strong>和若干个负责处理单个请求的<strong>从属进程</strong>。工作步骤如下：</p>
<ol type="1">
<li>打开熟知端口（端口号 21），以便客户连接。</li>
<li>等待客户发出连接请求。</li>
<li>启动从属进程处理请求，建立连接（熟知端口号 20），处理完毕终止该从属进程。</li>
<li>回到等待状态，继续接受请求。主进程与从属进程是<strong>并发</strong>的。</li>
</ol>
<p>​ 主进程即负责<strong>控制连接</strong>，从属进程即负责<strong>数据连接</strong>。FTP 控制信息是<strong>带外 (out of band)</strong> 传送的。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123103128516.png" alt="image-20231123103128516" /><figcaption aria-hidden="true">image-20231123103128516</figcaption>
</figure>
<p>​ NFS 允许应用进程打开一个远地文件并从某一特定位置开始读写数据，在网络上传送的仅是少量修改数据。</p>
<h5 id="简单文件传送协议-tftp">6.2.3 简单文件传送协议 TFTP</h5>
<p>​ 两个优点：</p>
<ul>
<li>可用于 UDP 环境。</li>
<li>代码所占内存小，可以用于小型机或某些特殊设备。</li>
</ul>
<p>​ 主要特点：</p>
<ul>
<li>每次传输 512 字节，最后一次可不足。</li>
<li>报文按序编号，1 开始。</li>
<li>支持 ASCII 或 二进制传送。</li>
<li>可对文件进行读或写。</li>
<li>使用很简单的首部。</li>
</ul>
<p>​ 发送一方在规定时间内收不到确认就需重发数据 PDU。 TFTP 熟知端口号码为 69。</p>
<h4 id="远程终端协议-telnet">6.3 远程终端协议 TELNET</h4>
<p>​ TELNET 能将用户击键传到远地主机，也能将远地主机输出通过 TCP 连接返回用户屏幕。又称<strong>终端仿真协议</strong>。</p>
<p>​ 为了适应不同操作系统的差异，TELNET 定义了数据和命令应怎样通过互联网，这些定义就是所谓的<strong>网络虚拟终端 NVT (Network Virtual Terminal)</strong>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123104246975.png" alt="image-20231123104246975" /><figcaption aria-hidden="true">image-20231123104246975</figcaption>
</figure>
<p>​ NVT 的格式定义很简单。所有通信都使用 8 位一个字节。运转时，采用 7 位 ASCII 码传输数据，最高位为 1 时用作控制命令。定义了两字符的 <strong>CR-LF</strong> 作为标准的行结束控制符。</p>
<h4 id="万维网-www">6.4 万维网 WWW</h4>
<p>​ 万维网是一个<strong>大规模的、联机式的信息储藏所</strong>。能方便地从一个站点访问（或称<strong>链接</strong>到）另外一个站点。万维网是一个分布式的<strong>超媒体 (hypermedia)</strong> 系统，是<strong>超文本 (hypertext)</strong> 系统的扩充。超文本是指包含指向其它文档的链接的文本。超文本是万维网的基础。</p>
<p>​ 万维网以客户服务器的方式工作。客户发出请求，服务器返回客户所需的万维网文档。万维网必须解决如下几个问题：</p>
<ul>
<li>怎样标志分布在整个互联网上的万维网文档？</li>
<li>用什么协议实现万维网各种链接？</li>
<li>如何使不同作者创作不同风格的文档，都能在各种主机上显示出来，同时使用户清楚知道什么地方存在着链接？、</li>
<li>如何使用户方便找到所需信息？</li>
</ul>
<h5 id="统一资源定位符-url">6.4.2 统一资源定位符 URL</h5>
<p><span class="math display">\[
URL:=&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;
\]</span></p>
<p>​ 常用协议 http，其次是 ftp。<主机>指出万维网文档的位置，<端口>和<路径>有时可以省略。</p>
<h6 id="使用-http-的-url">6.4.2.1 使用 HTTP 的 URL</h6>
<p><span class="math display">\[
URL:=http://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;
\]</span></p>
<p>​ HTTP 默认端口号 80，通常可省略。若再省略路径，则连接到<strong>主页 (home page)</strong>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123105938675.png" alt="image-20231123105938675" /><figcaption aria-hidden="true">image-20231123105938675</figcaption>
</figure>
<h5 id="超文本传送协议-http">6.4.3 超文本传送协议 HTTP</h5>
<h6 id="http-的操作过程">6.4.3.1 HTTP 的操作过程</h6>
<p>​ 从层次角度看，HTTP 是<strong>面向事务的 (transaction-oriented)</strong> 应用层协议，可以传输任何可从互联网上得到的信息，如文本、超文本、声音和图像等。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123113251838.png" alt="image-20231123113251838" /><figcaption aria-hidden="true">image-20231123113251838</figcaption>
</figure>
<p>​ 每个万维网网点都有一个服务器进程，不断监听 TCP 端口 80，以便发现是否有连接建立请求。一旦监听到连接建立请求并建立 TCP 连接后，浏览器就发出浏览某个页面的请求，服务器就返回页面作为响应。这种交互过程遵循的格式和规则，就是 HTTP。</p>
<p>​ HTTP 报文通常使用 TCP 的连接传送，但 HTTP 本身是<strong>无连接</strong>的。</p>
<p>​ HTTP 协议是<strong>无状态的 (stateless)</strong>。每次访问时服务器响应都相同，并不记录曾经的访问。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123113709977.png" alt="image-20231123113709977" /><figcaption aria-hidden="true">image-20231123113709977</figcaption>
</figure>
<p>​ 如图所示，请求一个 Web 文档所需时间是传输时间加上两倍往返时间 RTT。</p>
<p>​ HTTP/1.0 每次请求都有两倍 RTT 开销，加上每建立一次连接都需要分配缓存和变量，开销很大，这种<strong>非持续连接</strong>会使 Web 服务器负担很重。</p>
<p>​ HTTP/1.1 协议使用了<strong>持续连接</strong>，响应后仍在一段时间内保持该条连接，响应同一个服务器的请求。该协议有两种工作方式，<strong>非流水线方式 (without pipelining)</strong> 和<strong>流水线方式 (with pipelining)</strong>。</p>
<p>​ 非流水线特点是，客户收到前一个响应后才能发出下一个请求，节省了建立连接所需一个 RTT 时间。</p>
<p>​ 流水线方式特点是，客户收到响应前就可发送下一个请求，服务器可连续响应，访问<strong>所有对象</strong>只需一个 RTT 时间，提高了效率。</p>
<h6 id="代理服务器">6.4.3.2 代理服务器</h6>
<p>​ <strong>代理服务器 (proxy server)</strong> 又称<strong>万维网高速缓存 (Web cache)</strong>。将最近的一些请求和响应暂存于本地磁盘，新请求到达先经代理服务器查询，查询不到则作为客户发送请求。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123114554859.png" alt="image-20231123114554859" /><figcaption aria-hidden="true">image-20231123114554859</figcaption>
</figure>
<h6 id="http-报文结构">6.4.3.3 HTTP 报文结构</h6>
<p>​ HTTP 有两类报文：请求报文和响应报文。</p>
<p>​ HTTP 是<strong>面向文本的 (text-oriented)</strong>，因此报文每个字段都是一些 ASCII 码。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123114745262.png" alt="image-20231123114745262" /><figcaption aria-hidden="true">image-20231123114745262</figcaption>
</figure>
<p>​ <strong>开始行</strong>：请求报文称<strong>请求行 (Request-Line)</strong>，响应报文称<strong>状态行 (Status-Line)</strong>。最后 CR 和 LF 分别代表回车和换行。</p>
<ul>
<li><del>==有点复杂，先咕咕了==</del></li>
</ul>
<h5 id="web-文档">6.4.4 Web 文档</h5>
<h6 id="静态-web-文档">6.4.4.1 静态 Web 文档</h6>
<p>​ 超文本标记语言 HTML 是一种制作 Web 页面的标准语言。其中插入链接的终端可以是其它网站页面，称<strong>远程链接</strong>；亦可为本地计算机的某一个文件或文件某处，称<strong>本地连接</strong>。</p>
<p>​ XML (Extensible Markup Language) 是<strong>可扩展标记语言</strong>，设计宗旨是传输数据。</p>
<p>​ XHTML (Extensible HTML) 是可扩展超文本标记语言，是更严格的 HTML 版本，并将逐渐取代 HTML。</p>
<p>​ CSS 是<strong>层叠样式表</strong>。HTML 负责结构化内容，CSS 负责格式化结构化的内容。</p>
<p>​ 以上都是<strong>静态文档 (static document)</strong>，创建完即不会改变。缺点是不够灵活，但 HTML 可以由不懂程序设计的人员创建，优点是简单。</p>
<h6 id="动态-web-文档">6.4.4.2 动态 Web 文档</h6>
<p>​ <strong>动态文档 (dynamic document)</strong> 是指文档内容是在浏览器访问万维网服务器时才由应用程序动态创建的。动态文档的开发是编写用于生成文档的应用程序，因此开发难度更大。实现动态文档需要对 Web 服务器的功能进行扩充：</p>
<ul>
<li>增加一个应用程序用来处理浏览器发来的数据并创建动态文档。</li>
<li>增加一个机制，使 Web 服务器将浏览器发来的数据传送给该程序，Web 服务器解释该应用程序输出并向浏览器返回 HTML 文档。</li>
</ul>
<p>​ <strong>通用网关接口 CGI (Common Gateway Interface)</strong> 是一种标准，定义动态文档该如何创建，输入数据该如何提供给应用程序，输出结果应如何使用。 CGI 的正式名是 <strong>CGI 脚本 (script)</strong>，又称 cgi-bin 脚本，因为在许多 Web 服务器上，为便于找到 CGI 程序，就放在 /cgi-bin 目录下。</p>
<p>6.4.4.3 活动 Web 文档</p>
<p>​ 有两种技术可用于浏览器屏幕显示的连续更新：</p>
<ul>
<li><strong>服务器推送 (sever push)</strong>：将所有工作交给服务器，服务器不断运行与动态文档相关应用程序并定期更新发送。
<ul>
<li>服务器开销过大。</li>
<li>要求 TCP 保持连接，TCP 连接数目增加导致平均带宽下降，时延增大。</li>
</ul></li>
<li><strong>活动文档 (active document)</strong>：把所有工作转移给浏览器端。传送角度看，浏览器和服务器都将活动文档看成静态文档。</li>
</ul>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123175807768.png" alt="image-20231123175807768" /><figcaption aria-hidden="true">image-20231123175807768</figcaption>
</figure>
<p>​ Java 技术是用于创建和运行活动文档的技术，是活动文档技术的一部分。</p>
<h5 id="web-信息检索系统">6.4.5 Web 信息检索系统</h5>
<p>​ 工具是<strong>搜索引擎 (search engine)</strong>，分两大类，<strong>全文检索</strong>搜索引擎和<strong>分类目录</strong>搜索引擎。</p>
<p>​ 全文搜索引擎通过搜索软件到互联网上各网站收集信息，建立一个在线索引数据库供用户查询，这种索引数据库必须及时更新以剔除过时信息。全文检索可以检索出大量信息，但缺点是结果不够准确。</p>
<p>​ 分类搜索引擎并不采集任何信息，而是用个网站向搜索引擎提交网站信息时填写的关键词和网站描述等信息，经审核后输入到分类目录数据库中，供用户查询。查询时无需使用关键词，只需按照分类，因而查询准确性较好。</p>
<p>​ 目前出现了<strong>垂直搜索引擎</strong>，在关键词检索基础上限制搜索领域，返回结果更倾向于信息、消息、条目等。</p>
<p>​ 还有<strong>元搜索引擎</strong>，将用户提交的检索发送到多个独立的搜索引擎上，处理结果并返回，重在提高搜索速度、智能化搜索结果、个性化搜索。查全率和准确率都较高。</p>
<p>​ Google 搜索软件同时进行许多运算，核心技术是 <strong>PageRank</strong>，即<strong>网页排名</strong>。PageRank 对链接数目进行加权统计。Larry Page 和 Sergey Brin 两人利用稀疏矩阵技巧，大大简化了计算量。</p>
<h5 id="博客和微博">6.4.6 博客和微博</h5>
<p>​ blog 使得网民不仅是互联网内容的消费者，亦是<strong>生产者</strong>。</p>
<p>​ 微博是一种互动及传播极快的工具，实时性、现场感和快捷性往往超过所有媒体。</p>
<h4 id="电子邮件">6.5 电子邮件</h4>
<h5 id="概述-2">6.5.1 概述</h5>
<p>​ 电子邮件两个重要标准：<strong>简单邮件传送协议 SMTP (Simple Mail Transfer Protocol)</strong> 和<strong>互联网文本报文格式</strong>。</p>
<p>​ SMTP 只能传送可打印的 7 位 ASCII 邮件，因此后来又提出<strong>通用互联网邮件扩充 MIME (Multipurpose Internet Mail Extensions)</strong>，可同时传送多种类型数据，数据类型于首部说明。</p>
<p>​ 一个电子邮件系统应有三个主要组成构件：<strong>用户代理、邮件服务器、邮件发送协议（如 SMTP）和邮件读取协议（如 POP3）</strong></p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123182738670.png" alt="image-20231123182738670" /><figcaption aria-hidden="true">image-20231123182738670</figcaption>
</figure>
<p>​ <strong>用户代理 UA (User Agent)</strong> 是用户与电子邮件系统的接口，又称为<strong>电子邮件客户端软件</strong>，如 Microsoft Outlook 和张小龙的 Foxmail。</p>
<p>​ 一个 UA 至少应当具有如下四个功能：</p>
<ul>
<li>撰写。</li>
<li>显示。</li>
<li>处理，包括发送邮件和接收邮件。</li>
<li>通信。</li>
</ul>
<p>​ 互联网上有许多<strong>邮件服务器</strong>，功能是发送和接收邮件并向发件人报告邮件传送结果，使用两种不同的协议，一种用于 UA 向服务器发送邮件或在服务器间发送邮件，如 SMTP；另一种用于 UA 从服务器读取邮件，如 POP3。</p>
<p>​ SMTP 和 POP3 都是用 TCP 连接来传送邮件的，使用 TCP 是为了保证可靠性。邮件由发送方服务器与接收方服务器间建立 TCP 连接进行传输，<strong>不会在任何中间邮件服务器落地</strong>。</p>
<p>​ 整个发送过程有两种不同通信方式，一是<strong>推 (push)</strong>，用于 SMTP 客户将邮件推给 SMTP 服务器；一是<strong>拉 (pull)</strong>，POP3 客户将邮件从 POP3 服务器拉过来。来件暂时存储在用户邮件服务器中，方便时便从服务器中读取来信。</p>
<p>​ TCP/IP 体系电子邮件系统规定<strong>电子邮件地址 (e-mail address)</strong> 格式如下： <span class="math display">\[
username@邮件服务器域名
\]</span></p>
<h5 id="smtp">6.5.2 SMTP</h5>
<p>​ SMTP 分连接建立、邮件传送、连接释放三部分，TCP 连接总是在通讯双方 SMTP 服务器直接建立，且 SMTP 传输的是明文，不利于保密。后来对 SMTP 进行扩充，称为 ESMTP。客户端发送报文时改用发送 EHLO 报文，若被拒绝则表明对方仍是一个标准的 SMTP 邮件服务器，不支持扩展，就采用原来的参数进行 SMTP 传输。</p>
<h5 id="电子邮件的格式">6.5.3 电子邮件的格式</h5>
<p>​ 首部包含一些关键字，最重要的是 To 和 Subject（<strong>主题</strong>），还有一项是<strong>抄送</strong>，表明给某某人发送一个副本。某些系统允许用户使用<strong>盲复写副本 Bcc (Blind carbon copy)</strong>，又称<strong>暗送</strong>，使发件人能将副本送与某人，但不希望为收件人知道。</p>
<h5 id="邮件读取协议-pop3-和-imap">6.5.4 邮件读取协议 POP3 和 IMAP</h5>
<p>​ 用户从 POP3 服务器读取了邮件，邮件即从服务器删除。容易猜到会有很多不必要的麻烦，因此 POP3 进行了些功能扩充，包括允许用户设置邮件读取后仍在 POP3 服务器中存放的时间。</p>
<p>​ IMAP 是一个联机协议，用户打开 IMAP 服务器的邮箱时，可以看到邮件首部。若需要打开某个邮件，则该邮件才传送到计算机上。缺点是如果用户没有将邮件复制到计算机上，则邮件一直存放在 IMAP 服务器中，需上网才能查看邮件。</p>
<h5 id="基于-web-的电子邮件">6.5.5 基于 Web 的电子邮件</h5>
<p>​ 打开浏览器后即可方便地收发邮件。</p>
<p>​ 浏览器和邮件服务器间传输用 HTTP 协议，但邮件服务器间仍采用 SMTP 协议。</p>
<h5 id="通用互联网邮件扩充-mime">6.5.6 通用互联网邮件扩充 MIME</h5>
<p>​ SMTP 有如下缺点：</p>
<ul>
<li>不能传送可执行文件或其它二进制文件。</li>
<li>限于传输 7 位 ASCII 码。</li>
<li>SMTP 服务器会拒收超过一定长度的邮件。</li>
<li>某些 SMTP 实现并未完全按照 SMTP 互联网标准。</li>
</ul>
<p>​ 于是提出<strong>通用互联网邮件扩充 MIME</strong>，继续用原来的邮件格式，但增加邮件主体结构，定义传送非 ASCII 编码规则。主要包括三部分：</p>
<ul>
<li>5 个新的首部，可包含在原来的首部中，提供了有关邮件主体信息。</li>
<li>定义了许多邮件内容格式，对多媒体电子邮件表示方法进行格式化。</li>
<li>定义传送编码，可对任何内容格式转换。</li>
</ul>
<p>​ 内容传送编码：</p>
<ul>
<li>最简单的是 7 位 ASCII，每行不能超过 1000 字符。</li>
<li>quoted-printable，适用于存在少量非 ASCII 码的数据，除特殊字符 '=' 之外，都不改变。'=' 和不可打印的 ASCII 以及非 ASCII 编码：二进制代码用两个十六进制数表示，然后在前加上一个等号 '='。'=' 的 quoted-printable 编码是 "=3D"。</li>
<li>base64 编码，可用于任意二进制文件。先将二进制代码划分为一个个 24 位单元，每个单元分为 4 个 6 位组，每个 6 位组按如下方法转化为 ASCII：0 到 63 的表示：先是 'A' 到 'Z' 26 个大写字母，再是 'a' 到 'z' 26 个小写字母，再是 '0' 到 '9' 10个数字，最后是 '+' 和 '/'。然后用 ASCII 码发送。 24 位的代码编码后变成了 32 位，开销为 25%。</li>
</ul>
<h4 id="动态主机配置协议-dhcp">6.6 动态主机配置协议 DHCP</h4>
<p>​ 在协议软件中给参数赋值的动作叫<strong>协议配置</strong>。连接到互联网的计算机的协议软件需要配置的项目包括：</p>
<ul>
<li>IP地址；</li>
<li>子网掩码；</li>
<li>默认路由 IP 地址；</li>
<li>域名服务器 IP 地址。</li>
</ul>
<p>​ 用人工进行协议配置很不方便，且易出错，应当采用自动配置方法。现在广泛使用的是<strong>动态主机配置协议 DHCP (Dynamic Host Configuration Protocol)</strong>，提供机制<strong>即插即用联网</strong>，允许计算机加入新的网络获取 IP 地址而不用手工参与。</p>
<p>​ DHCP 给运行服务器软件而位置固定的计算机指派一个永久地址，重启时地址不变。</p>
<p>​ DHCP 采用客户服务器方式。需要 IP 地址的计算机启动时就向 DHCP 广播<strong>发现报文 (DHCPDISCOVER)</strong>（目的 IP 地址全置为 1），DHCP 服务器回答报文称为<strong>提供报文 (DHCPOFFER)</strong>，先从数据库中查找配置信息，若找到则返回，找不到则从 IP 地址池中取出一个分配之。</p>
<p>​ 每个网络至少有一个 DHCP <strong>中继代理 (relay agent)</strong>，收到主机 A 的广播发现报文后，就<strong>单播</strong>向 DHCP 服务器转发报文，收到服务器回答报文后转发给 A。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231123194215241.png" alt="image-20231123194215241" /><figcaption aria-hidden="true">image-20231123194215241</figcaption>
</figure>
<p>​ DHCP 客户只能在一段有限时间内使用分配到的 IP，称为<strong>租用期 (lease period)</strong>。DHCP 客户使用的端口号为 68，服务器用的 UDP 端口是 67。</p>
<ul>
<li>租用期过了一半，DHCP 发送请求报文请求更新租用期。</li>
<li>若服务器同意，则发回确认报文。更新计时器。</li>
<li>不同意，则发回否认报文。客户必须重新申请 IP 地址。</li>
<li>提前终止租用期，发送释放报文即可。</li>
</ul>
<h4 id="简单网络管理协议-snmp">6.7 简单网络管理协议 SNMP</h4>
<h5 id="基本概念">6.7.1 基本概念</h5>
<p>​ 网络管理包括对硬件、软件和人力的使用、综合与协调，以便对网络资源进行监视、测试、配置、分析、评价和控制，以合理的价格满足网络的一些需求，如实时运行性能、服务质量等。</p>
<p>​ <strong>管理站</strong>又称管理器，是整个网络管理系统的核心，通常是个有着良好图形界面的高性能工作站，并由网络管理员直接操作和控制。</p>
<p>​ 管理站所在部门常称为<strong>网络运行中心 NOC (Network Operations Center)</strong>，管理站中关键构件是<strong>管理程序</strong>，管理站（硬件）或管理程序（软件）均可称为<strong>管理者 (manager)</strong> 或管理器，网络管理员 (administrator) 才是指人。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231124091630752.png" alt="image-20231124091630752" /><figcaption aria-hidden="true">image-20231124091630752</figcaption>
</figure>
<p>​ 被管网络中有很多<strong>被管设备</strong>，可以是主机、路由器、打印机、集线器、网桥或网络解调器等。被管设备有时可称<strong>网络元素</strong>或<strong>网元</strong>。每个被管设备都要运行一个程序以便和管理站中的管理程序通信，这些程序称为<strong>网络管理代理程序</strong>或简称<strong>代理 (agent)</strong>。</p>
<p>​ <strong>简单网络管理协议 SNMP (Simple Network Management Protocol)</strong> 中的管理程序和代理按客户服务器方式工作。管理程序运行 SNMP 客户程序，代理运行 SNMP 服务器程序。被管对象 SNMP 服务器不断监听来自管理站 SNMP 客户的请求，一旦发现就立刻返回i信息或执行某个动作。</p>
<p>​ 网络管理基本原理：<strong>若要管理某个对象，必然会给该对象添加一些硬件或软件，但这种“添加”对原有对象影响必须小些。</strong></p>
<p>​ 若网元使用的不是 SNMP 而是另一种网管协议，可使用<strong>委托代理 (proxy agent)</strong> 实现如协议转换和过滤操作等功能对被管对象进行管理。</p>
<p>​ 下将详细介绍 SMI、MIB 和 SNMP。</p>
<p>​ SMI 建立规则，MIB 对变量进行说明， SNMP 完成网管的动作。</p>
<h5 id="管理信息结构-smi">6.7.2 管理信息结构 SMI</h5>
<p>​ SMI 有三个任务：</p>
<ul>
<li>被管对象怎么命名；</li>
<li>被管对象的数据类型；</li>
<li>被管对象如何编码。</li>
</ul>
<h6 id="被管对象的命名">6.7.2.1 被管对象的命名</h6>
<p>​ 采用<strong>对象命名树 (object naming tree)</strong>，根无名。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231124092730981.png" alt="image-20231124092730981" /><figcaption aria-hidden="true">image-20231124092730981</figcaption>
</figure>
<h6 id="被管对象的数据类型">6.7.2.2 被管对象的数据类型</h6>
<p>​ SMI 使用基本抽象语法记法 1 (ASN.1) 来定义数据类型，也增加了一些新的定义。SMI 把数据类型分为两大类：<strong>简单类型</strong>和<strong>结构化</strong>类型。</p>
<p>​ 两种结构化类型 sequence 和 sequence of，前者类似于 C 语言的 struct，后者类似于 C 语言的 array。</p>
<h6 id="编码方法">6.7.2.3 编码方法</h6>
<p>​ SMI 使用 ASN.1 制定的<strong>基本编码规则 BER (Basic Encoding Rule)</strong> 进行编码。把所有数据元素表示为 T-L-V 三个字段，T (Tag) 定义类型，L (Length) 定义 V 字段长度，V (Value) 定义字段的值。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231124093746676.png" alt="image-20231124093746676" /><figcaption aria-hidden="true">image-20231124093746676</figcaption>
</figure>
<p>​ T 字段又称为<strong>标记字段</strong>，分为如下三个子字段：</p>
<ul>
<li><strong>类别（2 位）</strong>：通用类 (00)，应用类 (01)，上下文类 (10)，专用类 (11)。</li>
<li>格式（1 位）：简单数据类型 (0)，结构化数据类型 (1)。</li>
<li>编号（5 位）：用以标志不同数据类型。</li>
</ul>
<h5 id="信息管理库-mib">6.7.3 信息管理库 MIB</h5>
<p>​ 管理程序使用 MIB 中信息的<strong>值</strong>对网络进行管理，只有在 MIB 中的对象才是 SNMP 所能管理的。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231124094124719.png" alt="image-20231124094124719" /><figcaption aria-hidden="true">image-20231124094124719</figcaption>
</figure>
<p>​ MIB 变量只给出了每个数据项的逻辑定义，而一个路由器使用的内部数据结构可能与 MIB 的定义不同。</p>
<h5 id="snmp-的协议数据单元和报文">6.7.4 SNMP 的协议数据单元和报文</h5>
<p>​ SNMP 实际上只有两种基本管理功能：</p>
<ul>
<li><strong>读</strong>：Get 报文检测被管对象状况。</li>
<li><strong>写</strong>：Set 报文改变被管对象状况。</li>
</ul>
<p>​ SNMP 不是完全的探寻协议，允许不经过询问发送某些信息，这些信息称之为<strong>陷阱 (trap)</strong>，能捕捉事件，但参数受限。仅在严重事件发生时才发送陷阱，且陷阱所需字节数很少。</p>
<p>​ SNMP 使用无连接的 UDP，开销很小。在运行代理的服务器端使用熟知端口 <strong>161</strong> 接收 Get 或 Set 报文以及发送响应报文，运行管理程序的客户端使用熟知端口 <strong>162</strong> 接收来自各代理的 trap 报文。</p>
<p>​ SNMP 报文无固定字段，采用 ASN.1 编码。一个 SNMP 报文由四部分组成：<strong>版本、首部、安全参数、数据部分</strong>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231124094913065.png" alt="image-20231124094913065" /><figcaption aria-hidden="true">image-20231124094913065</figcaption>
</figure>
<h4 id="p2p">6.9 P2P</h4>
<p>​ 目前互联网流量中，P2P 文件分发已经占据最大份额。</p>
<h5 id="集中目录服务器的-p2p-初代-p2p-napster">6.9.1 集中目录服务器的 P2P —— 初代 P2P Napster</h5>
<p>​ 使用 Napster 可通过互联网免费下载各种 MP3 音乐，运行 Napster 的所有用户，都必须及时向 Napster 的目录服务器报告自己已经存有哪些音乐文件。当用户需要时，便向服务器发出查询，服务器返回存有这一文件的计算机 IP 地址。</p>
<h5 id="分布式结构的-p2p-文件共享程序">6.9.2 分布式结构的 P2P 文件共享程序</h5>
<p>​ 二代 P2P Gnutella 使用洪泛法在大量 Gnutella 用户间进行查询。其使用了一种<strong>有限范围的洪泛查询</strong>。</p>
<p>​ 下介绍更后来的技术——比特洪流 BT (Bit Torrent)。BT 把参与某个文件分发的所有对等方称之为一个<strong>洪流 (torrent)</strong>，对等方下载文件的数据单元称为<strong>文件块 (block)</strong>。</p>
<p>​ 每个洪流有一个基础设施节点称<strong>追踪器 (tracker)</strong>，一个对等放方加入洪流时必须<strong>登记</strong>（或称<strong>注册</strong>），并周期性通知其仍处于洪流中。</p>
<p>​ 一个洪流中，文件的需求方和提供方之间通过建立 TCP 连接传输文件块。当一个对等方 A 加入洪流时，追踪器为其指派若干个<strong>相邻对等方</strong>，A 通过 TCP 连接周期性向相邻对等方索取它们拥有的文件块列表。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231124100046577.png" alt="image-20231124100046577" /><figcaption aria-hidden="true">image-20231124100046577</figcaption>
</figure>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231124100053260.png" alt="image-20231124100053260" /><figcaption aria-hidden="true">image-20231124100053260</figcaption>
</figure>
<p>​ A 必须抉择的是：哪些文件块需要向相邻对等放请求？在众多请求中，应向哪些相邻对等放发送所请求的文件块？</p>
<p>​ 对于前者，A 采用<strong>最稀有的优先 (rarest first)</strong> 技术，凡是 A 所缺少而相邻对等方已拥有的块，都应当去索取。</p>
<p>​ 对于后者，采用算法：凡当前有以最高数据率向 A 传送文件块的某相邻对等方， A 就优先将请求块传送给它。</p>
<h5 id="在-p2p-对等方中搜索对象">6.9.4 在 P2P 对等方中搜索对象</h5>
<p>​ 数据库中存储信息仅两个部分：<strong>资源名 K</strong>（又称关键字）、存放该对象的节点的 IP 地址 N（有的 IP 还附有端口号）。</p>
<p>​ 现在广泛使用的索引和查找技术叫<strong>分布式散列表 DHT (Distributed Hash Table)</strong>，是由大量对等方共同维护的哈希表。基于 DHT 的算法如 Chord，把资源名 K 及 IP 地址 N 分别映射到<strong>资源名标识符 KID</strong> 和<strong>节点标识符 NID</strong>。把结点标识符从小到大沿顺时针排列成一个环形覆盖网络 Chord 环并按规则映射：</p>
<ul>
<li>NID 按照标识符值映射到 Chord 环上对应的点。</li>
<li>KID 按照其标识符值映射到最近的下一个 NID。</li>
</ul>
<p>​ 举例说明： K31 和 K2 都放在 N4，表示要找资源 K31 或 K2 的结点的 IP，应当到 N4 去找。即按 K 映射到 KID，从 KID 找到 NID，在 NID 中寻找 IP 地址 N。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231124101342545.png" alt="image-20231124101342545" /><figcaption aria-hidden="true">image-20231124101342545</figcaption>
</figure>
<p>​ 定位一个资源，平均沿环发送查找报文 N/2 个或遍历所有结点，显然效率很低。</p>
<p>​ 为加速查找，可以采用倍增算法，每个结点 x 指向 <span class="math inline">\(x+1, x+2, x+4, x+8...\)</span> 的结点，这样当欲定位某个编号的结点时，即可在 log 的开销内查找。举例：</p>
<p>​ 当前在结点 <span class="math inline">\(1\)</span>，欲定位到结点 <span class="math inline">\(28\)</span>，则 <span class="math inline">\(1 + 16 = 17\)</span>, <span class="math inline">\(17 + 8 = 25\)</span>, <span class="math inline">\(25 + 2 = 27\)</span>, <span class="math inline">\(27 + 1 = 28\)</span>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231124101751582.png" alt="image-20231124101751582" /><figcaption aria-hidden="true">image-20231124101751582</figcaption>
</figure>
<p>​ P2P 存在一些关键的问题，一是知识产权，二是 P2P 流量管理，处理网上一些灰色资源，三是网络资源占据。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2023/11/22/%E8%B0%A2%E5%B8%8C%E4%BB%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C05-%E8%BF%90%E8%BE%93%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/22/%E8%B0%A2%E5%B8%8C%E4%BB%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C05-%E8%BF%90%E8%BE%93%E5%B1%82/" class="post-title-link" itemprop="url">谢希仁计算机网络05-运输层</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-11-22 08:14:00" itemprop="dateCreated datePublished" datetime="2023-11-22T08:14:00+08:00">2023-11-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-05 08:58:53" itemprop="dateModified" datetime="2024-01-05T08:58:53+08:00">2024-01-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%BD%91/" itemprop="url" rel="index"><span itemprop="name">计网</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="运输层概述">5.1 运输层概述</h3>
<h5 id="基础知识补充">5.1.1 基础知识补充</h5>
<p>​ 从 IP 层来说，通讯主体是两台主机。但从运输层的视角来看，真正进行通信的实体一台主机中的一个<strong>进程</strong>与另一台主机一个的<strong>进程</strong>。</p>
<p>​ 因此，运输层有一个比较重要的功能——<strong>复用 (multiplexing) </strong>和<strong>分用 (demultiplexing)</strong>。复用是指发送端不同应用程序可以使用同一个运输层传输协议。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121160059831.png" alt="image-20231121160059831" /><figcaption aria-hidden="true">image-20231121160059831</figcaption>
</figure>
<p>​ 由图观之，网络层为主机之间提供逻辑通信，而运输层为进程之间提供逻辑通信。</p>
<h5 id="运输层的端口">5.1.2 运输层的端口</h5>
<p>​ 单个计算机用的是进程标识符，但由于计算机操作系统种类很多，因此使用该种进程标识符来表示进程并不合适。</p>
<p>​ 此外，由于进程创建撤销均是动态的，通信一方几乎无法识别对方机器上的进程，因而将特定进程指名为终点是不可行的。</p>
<p>​ 解决方案是运输层采用<strong>协议端口号 (protocol port number)</strong>，或简称为<strong>端口 (port)</strong>。这种抽象的协议端口是<strong>软件端口</strong>。端口号只具有<strong>本地意义</strong>，只是为了标志<strong>本计算机</strong>应用层中的各个进程在运输层交互时的层间接口。不同计算机相同端口号是<strong>没有关联</strong>的。</p>
<p>​ 运输层端口号分为两大类：</p>
<ul>
<li><strong>服务器端使用的端口号</strong>：又分为两种
<ul>
<li>熟知端口号：又称<strong>系统端口号</strong>。</li>
<li>系统端口号：又称<strong>短暂端口号</strong>，通信结束就回收可给其它进程使用。</li>
</ul></li>
</ul>
<h5 id="运输层两个协议">5.1.3 运输层两个协议</h5>
<p>​ <strong>用户数据报协议 UDP (User Datagram Protocol)</strong>：传输前无需建立连接，不提供可靠交付，且较为简单。</p>
<p>​ <strong>传输控制协议 TCP (Transmission Control Protocol)</strong>：提供<strong>面向连接</strong>的服务，但不提供广播或多播服务，较为复杂。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121162255202.png" alt="image-20231121162255202" /><figcaption aria-hidden="true">image-20231121162255202</figcaption>
</figure>
<p>​ 接下来将详细阐述两个协议的内容及要点。</p>
<h4 id="用户数据报协议-udp">5.2 用户数据报协议 UDP</h4>
<p>​ UDP 有主要特点如：</p>
<ul>
<li>UDP 是无连接的。</li>
<li>UDP 使用尽最大努力的交付。</li>
<li>UDP 是面向报文的。直接将来自应用程序的报文添加首部后即交付 IP 层，因此报文大小的缺点需由应用程序负责。</li>
<li>UDP 无拥塞控制。</li>
<li>UDP 支持<strong>一对一</strong>、<strong>一对多</strong>、<strong>多对一</strong>和<strong>多对多</strong>交互通信。</li>
<li>UDP 首部开销小，止 8 字节。</li>
</ul>
<p>​ 首部格式如图：</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121162325100.png" alt="image-20231121162325100" /><figcaption aria-hidden="true">image-20231121162325100</figcaption>
</figure>
<p>​ 若接收方发现收到端口号不正确，则丢弃并由网际控制报文协议 ICMP 发送”端口不可达“差错报文。</p>
<p>​ ”伪首部“的出现是为了计算检验和，在实际传输中并不存在。检验和为 UDP 数据报每一个 16 位字之和的反码，到接收端再与每一 16 位字相加，最终结果为全 1 即无差错。</p>
<h4 id="传输控制协议-tcp-概述">5.3 传输控制协议 TCP 概述</h4>
<h5 id="tcp-协议主要特点">5.3.1 TCP 协议主要特点</h5>
<ol type="1">
<li><strong>面向连接</strong>，使用前建立连接，使用后释放连接。</li>
<li>只能是<strong>点对点</strong>的通信。</li>
<li>提供<strong>可靠交付</strong>，无差错，不丢失，不重复，且按序到达。</li>
<li>提供<strong>全双工通信</strong>。</li>
<li>面向<strong>字节流</strong>。流是指<strong>流入到进程或从进程流出的字节序列</strong>。</li>
</ol>
<h5 id="tcp-的连接">5.3.2 TCP 的连接</h5>
<p>​ TCP 连接的端点叫<strong>套接字 (socket)</strong> 或<strong>插口</strong>，我们由： <span class="math display">\[
socket = (IP:port)\\
TCP\ link::=\{socket1,socket_2\}=\{(IP_1:port_1),(IP_2:port_2)\}
\]</span></p>
<h4 id="可靠传输工作原理">5.4 可靠传输工作原理</h4>
<p>​ 理想传输条件两大特点：</p>
<ul>
<li>传输信道不产生差错。</li>
<li>不论发送端以多快速度发送数据，接收端总来得及处理收到数据。</li>
</ul>
<h5 id="停止等待协议">5.4.1 停止等待协议</h5>
<p>​ 假定 A 与 B 之间进行通讯。</p>
<h6 id="无差错情况">5.4.1.1 无差错情况</h6>
<p>​ 无差错时，A 发予 B 一个分组，B 接受后对 A 发送该分组的确认，A 收到确认后继续发送下一分组，如此往复。</p>
<h6 id="出现差错">5.4.1.2 出现差错</h6>
<p>​ B 接受到分组时除了差错并丢弃，或是分组在传输中丢失，B 都不会发送任何消息。A 过了一段时间没收到确认，就执行<strong>超时重传</strong>。为实现超时重传，每发送一个分组设置一个<strong>超时计时器</strong>。若计时器到期前收到确认，则撤销计时器。</p>
<ul>
<li>A 发送完分组必须保存副本以备重传。</li>
<li>分组与确认分组必须<strong>编号</strong>。</li>
<li>重传时间应稍大于平均往返时间，提升效率节省资源。</li>
</ul>
<h6 id="确认丢失与确认迟到">5.4.1.3 确认丢失与确认迟到</h6>
<p>​ 倘如 B 接收到分组 <span class="math inline">\(M_1\)</span>，但发回 A 的确认丢失，A 执行重传，B 又收到了相同的分组，此时应作两个动作：</p>
<ul>
<li><strong>丢弃重复分组。</strong></li>
<li><strong>向 A 发送确认。</strong></li>
</ul>
<p>​ 这种可靠传输协议通常称<strong>自动重传请求 ARQ (Automatic Repeat reQuest)</strong>。</p>
<p>​ 重传协议的优点是简单，但缺点是信道利用率低。 <span class="math display">\[
U = \frac{T_D}{T_D+RTT+T_A}
\]</span> <img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121184735026.png" alt="image-20231121184735026" /></p>
<p>​ 为了提高传输效率，我们采用<strong>流水线传输</strong>。为此引出下面一堆芝士。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121184822027.png" alt="image-20231121184822027" /><figcaption aria-hidden="true">image-20231121184822027</figcaption>
</figure>
<h5 id="连续-arq-协议">5.4.2 连续 ARQ 协议</h5>
<p>​ 核心概念是<strong>窗口</strong>，窗口大小设定为 size。</p>
<p>每次，发送端将窗口内连续的分组全部发送出去，接收端采用<strong>累计确认</strong>方式，对按序到达的最后一个分组发送确认。发送端每收到一个确认，就进行调整把滑动窗口前移。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121184940413.png" alt="image-20231121184940413" /><figcaption aria-hidden="true">image-20231121184940413</figcaption>
</figure>
<h4 id="tcp-报文段首部格式">5.5 TCP 报文段首部格式</h4>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121185758124.png" alt="image-20231121185758124" /><figcaption aria-hidden="true">image-20231121185758124</figcaption>
</figure>
<ul>
<li><strong>确认号</strong>：期望收到下一个报文段的第一个数据字节的序号。</li>
</ul>
<blockquote>
<p>若确认号 = N，则表明：到序号 N-1 为止所有的数据都已经收到。</p>
</blockquote>
<ul>
<li><strong>紧急 URG (URGent)</strong>：置为 1 时，紧急指针字段有效，应尽快传送。</li>
<li><strong>确认 ACK (ACKnowledgment)</strong>：置为 1 时确认号才有效。TCP 规定建立连接后所有报文段 ACK 都必须置为 1。</li>
<li><strong>同步 SYN (SYNchronization)</strong>：置为 1 表示是一个连接请求或连接接受报文。</li>
<li><strong>窗口</strong>：接收方让发送方设置其发送窗口的依据。窗口字段指出了现在允许对方发送的数据量。窗口值经常动态变化着。</li>
<li><strong>紧急指针</strong>：指出紧急数据字节数。</li>
<li>选项
<ul>
<li>TCP 最初只规定一种选项，<strong>最大报文长度 MSS (Maximum Segment Size)</strong>，指的是每一个 TCP 报文段<strong>数据字段最大长度</strong>，默认值为 536 字节。</li>
<li>后续增加<strong>窗口扩大</strong>选项，TCP 首部窗口是 16 位，窗口扩大选项占 3 字节，其中一个字节表示移位值 S，位数从 16 增大到 (16 + S)，且 S 最大值为 14。无需扩大时，可以发送 S = 0 的选项。</li>
<li><strong>时间戳</strong>，一是用于计算往返时间 RTT，二是处理 TCP 序号溢出的情况。</li>
</ul></li>
</ul>
<h4 id="tcp-可靠传输的实现">5.6 TCP 可靠传输的实现</h4>
<h5 id="补充">5.6.1 补充</h5>
<p>​ TCP 滑动窗口也有可能后缩，但 TCP 标准<strong>墙裂不推荐这么做</strong>。重传机制已如上讲述。</p>
<p>​ 发送缓存暂时存放：</p>
<ul>
<li>发送程序传送给发送方 TCP 准备发送的数据；</li>
<li>TCP 已发送但未收到确认的数据。</li>
</ul>
<p>​ 接收缓存暂时存放：</p>
<ul>
<li>按序到达但尚未被接收程序读取的数据；</li>
<li>未按序到达的数据。</li>
</ul>
<p>​ 对于未按序到达的数据，TCP 标注并无明确规定如何处理。一般是待缺失的数据流收到后，再按序交付上层。</p>
<h5 id="超时重传时间的选择">5.6.2 超时重传时间的选择</h5>
<p>​ 采用自适应算法。<strong>RTT：往返时间。RTO：超时重传时间</strong>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121192544945.png" alt="image-20231121192544945" /><figcaption aria-hidden="true">image-20231121192544945</figcaption>
</figure>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231229104747507.png" alt="image-20231229104747507" /><figcaption aria-hidden="true">image-20231229104747507</figcaption>
</figure>
<p>​ <strong>Karn 算法及修正</strong>：计算加权 RTTS 时，不考虑重传段。每重传一次，将 RTO 加倍。</p>
<h4 id="tcp-流量控制">5.7 TCP 流量控制</h4>
<p>​ 流量控制就是<strong>让发送方发送速率不要太快，让接收方来得及接收</strong>。</p>
<p>​ 发送方的窗口不能超过接收方给出的接收窗口的数值。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121194421960.png" alt="image-20231121194421960" /><figcaption aria-hidden="true">image-20231121194421960</figcaption>
</figure>
<p>​ 若 B 向 A 发送零窗口后， 又有了存储空间，继续发送 rwnd = 400 的报文段，却于传输途中丢失，A 一直等待 B 的通知，而 B 也一直等待 A 的报文段，若没有其它措施，死锁局面将一直持续下去。为此，TCP 为每个连接设有一个<strong>持续计时器 (persistence timer)</strong>。只要一方收到对方零窗口通知则启动计时器，时间到期则发送零窗口<strong>探测报文段（仅携带 1 字节数据）</strong>。若窗口值确实为 0，就重置，否则死锁局面被打破。</p>
<p>​ TCP 的实现广泛使用 Nagle 算法：若进程把数据逐字节发送到 TCP 缓存，则发送方把第一个数据字节先发送出去，把后面到达的全部缓存。当收到第一个数据字符确认后，再把缓存中所有数据组装成一个报文发送出去，对随后到达的数据缓存。仅当收到前一个段的确认后才发送下一个段。当到达数据已经到达发送窗口大小一般或最大报文长度，就立即发送。 这种算法可以有效提高网络吞吐量。</p>
<p>​ <strong>窗口糊涂综合征：</strong>TCP 接收方缓存已满，而交互式应用进程每次只从接收缓存中读取 1 字节。接收方发回确认，将窗口置位 1 字节。如此下去，效率很低。为解决此问题，可以让接收方等待一段时间，待缓存能容纳一个最长报文段或有一半闲余空间，发出确认报文，并通知当前窗口大小。</p>
<h4 id="tcp-拥塞控制">5.8 TCP 拥塞控制</h4>
<h5 id="拥塞控制一般原理">5.8.1 拥塞控制一般原理</h5>
<p><span class="math display">\[
\sum对资源需求&gt;可用资源
\]</span></p>
<p>​ 拥塞控制即<strong>防止过多数据注入到网络中，可以使网络中路由器或链路不至过载</strong>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121202516053.png" alt="image-20231121202516053" /><figcaption aria-hidden="true">image-20231121202516053</figcaption>
</figure>
<p>​ 拥塞控制分为<strong>开环控制</strong>与<strong>闭环控制</strong>两种。开环控制是在设计网络时事先将有关发生拥塞的因素考虑到，但系统运行后就不做改变了。</p>
<p>​ 闭环控制基于环路反馈，有如下措施：</p>
<ul>
<li>检测网络系统以定位拥塞。</li>
<li>将拥塞信息传送到可采取行动的地方。</li>
<li>调整网络系统运行以解决问题。</li>
</ul>
<h5 id="拥塞控制方法">5.8.2 拥塞控制方法</h5>
<p>​ <strong>慢开始</strong>、<strong>拥塞避免</strong>、<strong>快重传</strong>、<strong>快恢复</strong>四种算法。</p>
<ul>
<li>慢开始：发送方维护一个<strong>拥塞窗口 cwnd (congestion winodw)</strong> 变量，发送时<strong>发送窗口等于拥塞窗口</strong>。以超时为依据判断网络拥塞，自小到大采用倍增增大拥塞窗口。</li>
</ul>
<p><span class="math display">\[
\Delta cwnd =min(N,SMSS)
\]</span></p>
<p>​ 用报文段个数作为窗口大小单位，每经过一个传输轮次，cwnd 加倍。SMSS (Sender Maximum Segment Size) 是指发送方的最大报文段。</p>
<ul>
<li>拥塞避免算法：每经过一个 RTT 就让 cwnd 加 1，呈线性缓慢增长。</li>
</ul>
<p>​ 实际操作中，慢开始和拥塞避免是配合使用的。设定一个 ssthresh 值，cwnd 小于该值，用慢启动；cwnd 大于该值，用拥塞避免；等于二者均可。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231121203427954.png" alt="image-20231121203427954" /><figcaption aria-hidden="true">image-20231121203427954</figcaption>
</figure>
<p>​ 超时则门限值置为当前 cwnd 的一半。当 B 端收到无序帧时，仍然发送对最前端已确认帧的确认，当 A 端收到一连三个确认帧，即可视为发生了数据丢失。</p>
<p>​ <strong>快恢复算法</strong>：发送端得知丢失个别报文段，便不进行慢启动，二是置拥塞窗口 sstresh = cwnd = cwnd / 2，并执行拥塞避免算法。</p>
<p>​ 拥塞避免阶段窗口线性增大，称为<strong>加法增大 AI (Additive Increase)</strong>。出现拥塞将门限值调整为原来一半，称为<strong>乘法减小 MD (Multiplicative Decrease)</strong>。二者结合即 AIMD 算法。</p>
<p>​ 同时发送窗口不得超过接收端窗口上限 rwnd。故有： <span class="math display">\[
发送窗口上限 = min[rwnd,cwnd]
\]</span></p>
<h5 id="主动队列管理-aqm">5.8.3 主动队列管理 AQM</h5>
<p>​ 路由器队列管理通常按照<strong>先进先出 FIFO</strong> 规则处理到来数据，当队列满时丢弃后续到达所有分组，称为<strong>尾部丢弃策略</strong>。但这种做法会导致短时间内大量连接同时进入满开始阶段，称为<strong>全局同步 (global syncronization)</strong>。</p>
<p>​ 为避免这种情况。出现了<strong>主动队列管理 AQM (Active Queue Management)</strong>，当队列长度达到某个警惕值时丢弃到达分组。曾流行的实现方法是<strong>随即早期检测 RED (Random Early Detection)</strong>，描述如下：</p>
<ul>
<li>若平均队列长小于最小门限，则将新分组加入队列。</li>
<li>若超过最大门限，则丢弃新分组。</li>
<li>若介于二者之间，则按某一丢弃概率 p 将新分组丢弃。</li>
</ul>
<h4 id="tcp-运输连接管理">5.9 TCP 运输连接管理</h4>
<p>​ 主动发起连接的进程称为<strong>客户 (client)</strong>，被动等待连接的进程称为<strong>服务器 (sever)</strong>。</p>
<h5 id="tcp-连接的建立">5.9.1 TCP 连接的建立</h5>
<p>​ 三次握手协议：（来自亲爱的 ChatGPT）</p>
<ul>
<li><strong>第一步 - 客户端发送连接请求：</strong>
<ul>
<li>客户端首先向服务器发送一个TCP报文，标志位中设置了SYN（同步）标志，并选择一个初始序列号（Initial Sequence Number）。</li>
<li>这个报文包含了客户端的一些连接参数，如MSS（Maximum Segment Size），表示客户端能够接受的最大报文段大小。</li>
</ul></li>
<li><strong>第二步 - 服务器确认请求并发送自己的连接请求：</strong>
<ul>
<li>服务器接收到客户端的SYN报文后，会回复一个确认报文，其中设置了SYN和ACK（确认）标志。</li>
<li>服务器也会选择一个自己的初始序列号，并在确认中包含自己的一些连接参数，如MSS。</li>
</ul></li>
<li><strong>第三步 - 客户端确认服务器的连接请求：</strong>
<ul>
<li>客户端接收到服务器的确认后，会向服务器发送一个确认报文，其中设置了ACK标志。</li>
<li>这个确认报文不包含SYN标志，因为连接已经建立。</li>
<li>服务器收到这个确认后，连接建立完成。</li>
</ul></li>
</ul>
<h5 id="tcp-连接释放">5.9.2 TCP 连接释放</h5>
<ol type="1">
<li>A 的进程线向其 TCP 发出连接释放报文段，并停止发送数据，主动关闭 TCP 连接。FIN 报文消耗一个序号，即使不携带数据。</li>
<li>B 收到报文段后立即发出确认，确认号 ack = u + 1，从 A 到 B 的连接即释放了，但从 B 到 A 的连接仍未释放，TCP 处于<strong>半关闭</strong>状态。</li>
<li>若 B 依据没有要向 A 发送数据，则发出释放报文，假定序号为 w。A 收到后，必须发出确认，ack = w + 1，序号为 seq = u + 1，经过<strong>等待计时器</strong>设置的时间 2MSL 后， A 进入 CLOSED 状态。，MSL 是<strong>最长报文段寿命</strong>。</li>
</ol>
<p>​ 此外，TCP 设有一个<strong>保活计时器</strong>，每个一段时间发送探测字段，若一连几个都收不到回应，则关闭连接。</p>
<h5 id="tcp-有限状态机">5.9.3 TCP 有限状态机</h5>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231122081330855.png" alt="image-20231122081330855" /><figcaption aria-hidden="true">image-20231122081330855</figcaption>
</figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2023/11/20/%E8%B0%A2%E5%B8%8C%E4%BB%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C04-%E7%BD%91%E7%BB%9C%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
      <meta itemprop="name" content="Lg">
      <meta itemprop="description" content="青春无悔不死">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mlger">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/20/%E8%B0%A2%E5%B8%8C%E4%BB%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C04-%E7%BD%91%E7%BB%9C%E5%B1%82/" class="post-title-link" itemprop="url">谢希仁计算机网络04-网络层</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-11-20 14:41:00" itemprop="dateCreated datePublished" datetime="2023-11-20T14:41:00+08:00">2023-11-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-05 16:28:46" itemprop="dateModified" datetime="2024-01-05T16:28:46+08:00">2024-01-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%BD%91/" itemprop="url" rel="index"><span itemprop="name">计网</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="网络层提供的两种服务">4.1 网络层提供的两种服务</h4>
<p>​ 电信网采用<strong>面向连接</strong>的通信方式，并在此基础上使用可靠传输协议，当有通信需求时，双方建立<strong>虚电路</strong>进行实时通讯，通讯结束后释放通讯资源。由于终端电话机结构简单，无处理差错能力，因此此方案对电话业务来说是十分合适的。</p>
<p>​ 但计算机网络的终端具有很强的处理差错能力，因此网络层的设计思路为：<strong>网络层向上只提供简单灵活的、无连接、尽最大努力的数据报服务</strong>。<strong>网络层不提供服务质量的承诺</strong>，可靠传输由网络主机中的运输层保障。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118144200510.png" alt="image-20231118144200510" /><figcaption aria-hidden="true">image-20231118144200510</figcaption>
</figure>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118163954841.png" alt="image-20231118163954841" /><figcaption aria-hidden="true">image-20231118163954841</figcaption>
</figure>
<h4 id="网际协议-ip">4.2 网际协议 IP</h4>
<p>​ 与 IP 协议配套的三个协议：</p>
<ul>
<li><strong>地址解析协议 ARP (Address Resolution Protocol)</strong></li>
<li><strong>网际控制报文协议 ICMP (Internet Control Message Protocol)</strong></li>
<li><strong>网际组管理协议 IGMP (Internet Group Management Protocol)</strong></li>
</ul>
<p>​ 三协议关系如下：</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118164422575.png" alt="image-20231118164422575" /><figcaption aria-hidden="true">image-20231118164422575</figcaption>
</figure>
<p>​ TCP/IP 协议中的网络层常常被称为<strong>网际层</strong>或 <strong>IP 层</strong>。</p>
<h5 id="虚拟互联网络">4.2.1 虚拟互联网络</h5>
<p>​ <strong>没有一种单一的网络能够适应所有用户的需求</strong>。将网络连接起来需要一些不同的中间设备，一般有如下四种：</p>
<ul>
<li>物理层：<strong>转发器 (repeater)</strong></li>
<li>数据链路层：<strong>网桥</strong>或<strong>桥接器 (bridge)</strong></li>
<li>网络层：<strong>路由器</strong></li>
<li>网络层以上：<strong>网关 (gateway)</strong></li>
</ul>
<p>​ 由于历史原因，许多 TCP/IP 的文献曾把网络层使用的路由器称为网关。</p>
<p>​ 参与互连的计算机网络都是用相同的网际协议 IP，因此可以看作一个大的虚拟互连网络。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118170200174.png" alt="image-20231118170200174" /><figcaption aria-hidden="true">image-20231118170200174</figcaption>
</figure>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118181737412.png" alt="image-20231118181737412" /><figcaption aria-hidden="true">image-20231118181737412</figcaption>
</figure>
<h5 id="分类的-ip-地址">4.2.2 分类的 IP 地址</h5>
<p><span class="math display">\[
IP地址 ::=\{&lt;网络号&gt;,&lt;主机号&gt;\}
\]</span></p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118181859665.png" alt="image-20231118181859665" /><figcaption aria-hidden="true">image-20231118181859665</figcaption>
</figure>
<p>​ 其中 D 类地址用于<strong>多播</strong>。</p>
<p>​ <strong>点分十进制表示法</strong>：32 位 IPv4 地址，八位一段点分隔，每段十进制表示。</p>
<p>​ 常用的三种类别 IP 地址</p>
<ul>
<li>A 类地址：
<ul>
<li>网络号占一个字节，第一位固定为 0，共 126 (<span class="math inline">\(2^7-2\)</span>) 个可分配，全 0 表示 "this"，意为“本网络”， 127 (01111111) 保留作为本地软件<strong>环回测试</strong>本主机进程之间通信之用。</li>
<li>主机号占三个字节，因此一个 A 类网络号最大主机数为 <span class="math inline">\(2^{24}-2\)</span> 。全 0 表示本主机连接到的单个网络地址，全 1 表示该网络上的所有主机。</li>
</ul></li>
<li>B 类地址：
<ul>
<li>网络号占两个字节，前两位固定为 10，共 <span class="math inline">\(2^{14}-1\)</span> 个可分配，128.0.0.0不指派。最大主机数 65534，扣除全 0 和全 1。</li>
</ul></li>
<li>C类地址：
<ul>
<li>网络号占三个字节，前三位固定 110，192.0.0.0 不指派，因此 <span class="math inline">\(2^{21}-1\)</span> 个网络号。每个 C 类地址最大主机数 254。</li>
</ul></li>
</ul>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118183641070.png" alt="image-20231118183641070" /><figcaption aria-hidden="true">image-20231118183641070</figcaption>
</figure>
<p>​ 两个路由器相连，在连线两端的接口处可分配也可不分配 IP 地址。节省资源则不分配，常称为 <strong>无编号网络</strong>或<strong>无名网络</strong>。</p>
<h5 id="ip-地址与硬件地址">4.2.3 IP 地址与硬件地址</h5>
<p>​ <strong>物理地址是数据链路层和物理层使用的地址，</strong>而 <strong>IP 地址是网络层和以上各层使用的地址，是一种逻辑地址。</strong></p>
<p>​ 在通讯过程，数据从高层下到低层，层层封装，然后才到链路上传输。设备在收到 MAC 帧时，根据首部硬件地址决定收下或丢弃。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118184141275.png" alt="image-20231118184141275" /><figcaption aria-hidden="true">image-20231118184141275</figcaption>
</figure>
<p>​ <strong>IP 层抽象的互联网上只能看到 IP 数据报</strong>。</p>
<p>​ <strong>虽然 IP 数据报有源地址，但路由器只根据目的站 IP 地址的网络号进行路由选择</strong>。</p>
<h5 id="地址解析协议-arp">4.2.4 地址解析协议 ARP</h5>
<p>​ 知道 IP 地址，找出其相应的硬件地址。ARP 在主机 ARP 高速缓存 (<strong>APR cache</strong>) 中存放一个有<strong>本局域网</strong>上的各主机和路由器 IP 到硬件地址的映射表，并且映射表经常动态更新。</p>
<p>​ 当 A 向 B 发送 IP 数据报时，先在其 ARP cache 中查找，若查不到，则 ARP 进程广播 ARP 请求分组，除 B 外的主机不响应，B 则响应并向 A 发送 ARP 响应分组（单播），且 B 也将 A 的物理地址写入 cache 中。</p>
<p>​ ARP 解决的是<strong>同一个局域网</strong>上的映射问题。</p>
<h5 id="ip-数据报的格式">4.2.5 IP 数据报的格式</h5>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118200817531.png" alt="image-20231118200817531" /><figcaption aria-hidden="true">image-20231118200817531</figcaption>
</figure>
<ul>
<li><strong>版本</strong>：4 位，指版本号，实际使用的只有 IPv4 和 IPv6。</li>
<li><strong>首部长度</strong>：4 位，单位是 32 位字（即 4 字节）</li>
<li><strong>区分服务</strong>：8 位，一般情况不使用</li>
<li><strong>总长度</strong>：首部和数据之和的长度，16 位，因此数据报最大长度为 65535 字节。数据链路层中还有<strong>最大传送单元 MTU (Maximum Transfer Unit)</strong>。</li>
<li><strong>标识</strong>：16 位，每产生一个数据报，计数器 +1，并赋值给标识。</li>
<li><strong>标志</strong>：3 位，但目前只有两位有意义
<ul>
<li>低位 <strong>MF</strong>。 MF = 1 表示后面“<strong>还有分片</strong>”的数据表， MF = 0 则表示当前已是最后一片。</li>
<li>中间为 <strong>DF</strong>。当前仅当 DF = 0 时允许分片。</li>
</ul></li>
<li><strong>片偏移</strong>：13 位，顾名思义，该片从何处开始。</li>
<li><strong>生存时间</strong>：8 位，没经过一个路由， TTL 减去 1，减为 0 时，就丢弃数据报。</li>
<li><strong>协议</strong>：8 位，指出使用的协议</li>
<li><strong>首部检验和</strong>：16 位，，只检验数据报首部，但不包括数据部分。发送方，检验和置位剩余 16 位字的反码之和。接收方将检验和在内的所有 16 位字相加，若首部未变化，其和必为 0。</li>
</ul>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118202056828.png" alt="image-20231118202056828" /><figcaption aria-hidden="true">image-20231118202056828</figcaption>
</figure>
<ul>
<li><strong>源地址</strong>：32 位</li>
<li><strong>目的地址</strong>：32 位</li>
</ul>
<h5 id="ip-层转发分组的流程">4.2.6 IP 层转发分组的流程</h5>
<p>​ 路由表信息： <span class="math display">\[
(目的网络地址, 下一跳地址)
\]</span> <img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118202909343.png" alt="image-20231118202909343" /></p>
<p>​ 存在<strong>特定主机路由</strong>，对特定的主机指明一个路由，以便管理人员控制网络和测试网络。</p>
<p>​ 存在<strong>默认路由</strong>，减小路由表所占的空间和搜索路由表所用的时间。</p>
<blockquote>
<p>默认路由（Default Route）是网络中的一种路由设置，用于指定当路由表中没有匹配的路由项时，数据包应该被发送到的下一个跃点或下一跳。默认路由通常用于简化路由表，特别是在大型网络中。</p>
</blockquote>
<blockquote>
<p>在IPv4网络中，默认路由通常使用0.0.0.0/0表示，这表示所有目标地址。当路由表中没有与目标地址匹配的具体路由项时，数据包将被发送到默认路由指定的下一个跃点。这有助于简化路由表，特别是在较大的网络中，减少路由表的大小和复杂性。</p>
</blockquote>
<blockquote>
<p>在IPv6网络中，类似的概念是使用::/0来表示所有IPv6地址。当没有与目标IPv6地址匹配的具体路由项时，数据包将被发送到默认路由指定的下一个跃点。</p>
</blockquote>
<p>​</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231118203422006.png" alt="image-20231118203422006" /><figcaption aria-hidden="true">image-20231118203422006</figcaption>
</figure>
<p>​ <strong>分组转发算法的流程</strong>：</p>
<ol type="1">
<li>从数据报首部提取目的主机 IP 地址 D，得出网络地址 N。</li>
<li>若 N 就是与此路由连接的某个网络，则 <strong>直接交付</strong>；否则执行 3。</li>
<li>若路由表有目的地址为 D 的特定主机路由，则交给其指明的下一跳；否则 4。</li>
<li>若路由表中有到达 N 的路由，则交给其指明的下一跳，否则 5。</li>
<li>默认路由，否则 6。</li>
<li>报错</li>
</ol>
<h4 id="划分子网与构造超网">4.3 划分子网与构造超网</h4>
<h5 id="划分子网">4.3.1 划分子网</h5>
<p>​ IP 地址设计不合理之处：</p>
<ul>
<li>IP 地址空间利用率有时很低，一个网络号所连接的主机可能并不多。</li>
<li>每个物理网络分配一个网络号会使得路由表太大而使网络性能变坏。</li>
<li>两级 IP 不够灵活，有时需要开辟一个新的网络，此时只能申请一个新的网络号。</li>
</ul>
<p>​ 划分子网的方法： <span class="math display">\[
IP地址:=\{&lt;网络号&gt;,&lt;子网号&gt;,&lt;主机号&gt;\}
\]</span> ​ 从 IP 数据报首部<strong>无法看出</strong>源主机或目的主机所连接的网络是否进行了子网划分，<strong>子网掩码</strong>正是用于解决这个问题的。</p>
<p>​ 子网掩码一般由一串连续的 1 和一串连续的 0 构成，且 1 的长度等于网络号与子网号位数之和，因此与 IP 地址进行<strong>与</strong>操作即可得出子网地址。 如果一个网络不划分子网，则使用默认子网掩码，显然，</p>
<p>​ A 类地址默认掩码为 255.0.0.0，或 0xFF000000。</p>
<p>​ B 类地址默认掩码为 255.255.0.0，或 0xFFFF0000。</p>
<p>​ C 类地址默认掩码为 255.255.255.0，或 0xFFFFFF00。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231119102550234.png" alt="image-20231119102550234" /><figcaption aria-hidden="true">image-20231119102550234</figcaption>
</figure>
<h5 id="使用子网时的分组转发算法">4.3.2 使用子网时的分组转发算法</h5>
<p>​ 路由表包含：<strong>目的网络地址、子网掩码</strong>和<strong>下一跳地址</strong>。</p>
<ol type="1">
<li>从收到的数据报提取 IP 地址 D。</li>
<li>各网络子网掩码与 D 相与，看看是否匹配，若匹配则直接交付，否则 3。</li>
<li>若路由表中有目的地址为 D 的特定主机路由，则交付之，否则 4。</li>
<li>对路由表每一行子网掩码与 D 相与，结果为 N，若 N 与该行目的网络的地址匹配，则交付给下一跳，否则 5。</li>
<li>默认路由，否则 6。</li>
<li>报错。</li>
</ol>
<h5 id="无分类编址-cidr-超网">4.3.3 无分类编址 CIDR （超网）</h5>
<p><span class="math display">\[
IP 地址:=\{&lt;网络前缀&gt;,&lt;主机号&gt;\}
\]</span></p>
<p>​ 网络前缀相同的连续 IP 地址组成一个 ”CIDR 地址块”。</p>
<p>​ CIDR 使用斜线激发，即 IP 地址后加上斜线 “/”，后写上前缀位数。</p>
<p>​ CIDR 还使用 32 位的地址掩码，其中前一串 1 就代表前缀。</p>
<p>​ 路由表中用 CIDR 地址块来查找目的网络，称为<strong>路由聚合</strong>或<strong>构造超网</strong>。</p>
<p>​ 在查找下一跳时，可能有多个 CIDR 地址块都能够与目的地址匹配，此时则根据<strong>最长前缀匹配</strong>原则确定下一跳。</p>
<p>​ 由于要进行最长前缀匹配，故最方便的方法即是在构造路由表时采用<strong>二叉线索</strong>，即 01-Trie，然后查询时即可迅速进行前缀匹配。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231119105513490.png" alt="image-20231119105513490" /><figcaption aria-hidden="true">image-20231119105513490</figcaption>
</figure>
<p>​ 为了提高效率，还可采用各式<strong>压缩技术</strong>。</p>
<h4 id="网际控制报文协议-icmp">4.4 网际控制报文协议 ICMP</h4>
<p>​ ICMP 报文分为 <strong>ICMP 差错报告报文</strong>和 <strong>ICMP 询问报文</strong>。</p>
<p>​ ICMP 报文前 4 个字节是统一的格式，三个字段：类型、代码和检验和。接着 4 个字节与 ICMP 类型有关。最后面是数据字段，长度取决于 ICMP 类型。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231119150429359.png" alt="image-20231119150429359" /><figcaption aria-hidden="true">image-20231119150429359</figcaption>
</figure>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231119150446519.png" alt="image-20231119150446519" /><figcaption aria-hidden="true">image-20231119150446519</figcaption>
</figure>
<p>​ <strong>改变路由（重定向）：</strong> 路由器把改变路由报文发送给主机，让主机知道下次该将数据报发送给另外的路由器（可通过更好的路由）。</p>
<p>​ 不应发送 ICMP 差错报告的情况：</p>
<ul>
<li>对 ICMP 差错报文，不再发送 ICMP 差错报文</li>
<li>对第一个分片的数据报片的所有后续数据报片，都不发送 ICMP 报文。</li>
<li>对具有多播地址的数据报，都不发送。</li>
<li>对具有特殊地址（如 127.0.0.0 或 0.0.0.0）的数据报，不发送 ICMP 报文。</li>
</ul>
<p>​ ICMP 的一个重要应用就是<strong>分组网间探测 PING (Packet InterNet Groper)</strong>，是应用层直接使用网络层 ICMP 的一个例子。</p>
<p>​ 另一个重要应用是 traceroute (UNIX) / tracert (windows)，用于跟踪一个分组源点到终点的路径。下介绍其原理：</p>
<p>​ 主要采用数据报中的生存时间 TTL，先发送 TTL 为 1，收到<strong>时间超过</strong>差错报文则 TTL + 1 重新发送，否则收到<strong>终点不可达</strong>报文，且长度即 TTL。</p>
<h4 id="互联网的路由选择协议">4.5 互联网的路由选择协议</h4>
<h5 id="几个基本概念">4.5.1 几个基本概念</h5>
<h6 id="理想路由算法">4.5.1.1 理想路由算法</h6>
<p>​ <strong>理想路由算法</strong>几个特点：</p>
<ul>
<li>必须是正确的和完整的。</li>
<li>计算上应简单。</li>
<li>应能适应通信量和网络拓扑的变化（稳健性）。</li>
<li>应具有稳定性，通信量和网络拓扑相对稳定的情况下，应该收敛于一个可接受的解。</li>
<li>算法应该是最佳的。</li>
</ul>
<h6 id="分层次的路由选择">4.5.1.2 分层次的路由选择</h6>
<p>​ 互联网采用<strong>分层次的路由选择</strong>，原因：</p>
<ul>
<li>互联网规模非常大。</li>
<li>许多单位不愿外界了解自己内部网络的细节。</li>
</ul>
<p>​ 为此，把互联网划分为许多小的<strong>自治系统 AS (autonomous system)</strong>。一个 AS 对其他的 AS 表现出的是<strong>一个单一的和一致的路由选择策略</strong>。</p>
<p>​ 故此，路由选择协议可以划分为两类：<strong>内部网关协议 IGP (Interior Gateway Protocol)</strong> 和<strong>外部网关协议 EGP (External Gateway Protocol)</strong>。常用的 IGP 有 RIP 和 OSPF 协议，常用的 EGP 有 BGP-4。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231119160651490.png" alt="image-20231119160651490" /><figcaption aria-hidden="true">image-20231119160651490</figcaption>
</figure>
<p>​ 此外，路由选择协议还可依照路由表更新方分为<strong>静态路由协议</strong>和<strong>动态路由协议</strong>，常见的动态路由协议有 RIP、OSPF、BGP 等。</p>
<h5 id="rip">4.5.2 RIP</h5>
<p>​ RIP 是一种<strong>基于距离向量的路由选择协议</strong>，最大优点是简单。其中的“距离”是指“<strong>跳数</strong>” (hop count)。但 RIP 一条路径最多只能包含 15 个路由器，因此 RIP 只适用于小型互联网。</p>
<h6 id="rip-特点">4.5.2.1 RIP 特点</h6>
<p>​ RIP 特点：</p>
<ul>
<li>仅和相邻路由器交换信息。</li>
<li>路由器交换的信息是当前本路由器的路由表。</li>
<li>按照固定的时间间隔交换路由信息，如 30 秒。</li>
</ul>
<p>路由表信息为： <span class="math display">\[
(路由表,距离,下一跳)
\]</span></p>
<p>​ 下介绍路由更新算法：</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231119161304200.png" alt="image-20231119161304200" /><figcaption aria-hidden="true">image-20231119161304200</figcaption>
</figure>
<p>​ 其实就是 Bellman-Fold 算法，不断遍历，能松弛即松弛。</p>
<p>​ 对于解释 3，书中的解释是无论距离是增大减小亦或不变，都要更新为最新的信息。</p>
<h6 id="rip-报文格式">4.5.2.2 RIP 报文格式</h6>
<p>​ RIP 报文格式：</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231119161732197.png" alt="image-20231119161732197" /><figcaption aria-hidden="true">image-20231119161732197</figcaption>
</figure>
<ul>
<li><p>首部 4 字节，命令字段指出报文意义。</p></li>
<li><p>路由部分由若干路由信息组成，每个路由信息 20 字节。</p>
<ul>
<li><strong>地址标识符</strong> 标志所用地址协议。 <strong>路由标记</strong>填入自治系统号 ASN。</li>
<li>网络地址、子网掩码、下一跳路由地址、距离。</li>
</ul>
<p>一个 RIP 报文最多 25 个路由，故而最大长度 <span class="math inline">\(4+20\times 25=504\)</span> 字节。</p></li>
</ul>
<p>RIP 存在的问题：<strong>当网络出现故障，需要经过比较长的时间才能将此信息传送到所有的路由器</strong>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231119163624180.png" alt="image-20231119163624180" /><figcaption aria-hidden="true">image-20231119163624180</figcaption>
</figure>
<p>​ RIP 特点总结：<strong>实现简单开销小，距离有限，坏消息传播慢</strong>。</p>
<h5 id="内部网关协议-ospf">4.5.3 内部网关协议 OSPF</h5>
<p>​ <strong>OSPF 开放最短路径优先</strong> 使用了 Dijkstra 提出的<strong>最短路径算法 SPF</strong>。OSPF 三个要点如下：</p>
<ul>
<li>洪泛法：向本自治系统<strong>所有</strong>路由器发送信息。</li>
<li>发送的信息是与本路由器相邻所有路由器的链路状态。</li>
<li>当且仅当链路发生变化，才使用洪泛。</li>
</ul>
<p>​ 由此，每个路由器都能够得到本网完整的网络拓扑，采用 djikstra 算法即可得出最短路径从而构造路由表。</p>
<p>​ 而且 OSPF 将一个自治系统再划分为若干个小的范围，称为<strong>区域 (area)</strong>。连接不同区域的路由器叫<strong>区域边界路由器</strong>。主干区域的路由器称<strong>主干路由器</strong>。OSPF 不用 UDP 而是<strong>直接用 IP 数据报传送</strong>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/image-20231119170556159.png" alt="image-20231119170556159" /><figcaption aria-hidden="true">image-20231119170556159</figcaption>
</figure>
<p>​ OSPF 其它特点：</p>
<ul>
<li>允许管理员指派不同代价，代价占 16 位，十分灵活。</li>
<li>若一个目的网络有多条相同代价路径，则可以分配通信量，达到<strong>负载平衡 (load balancing)</strong>。</li>
<li>支持可变长子网划分与 CIDR。</li>
<li>链路可能经常变变化，每条链路带上一个序号，序号越大链路越新。</li>
</ul>
<p>​ OSPF 五种分组类型：</p>
<ul>
<li><p><strong>类型1 问候 (hello) </strong>分组，用于发现维持邻站可达性。</p></li>
<li><p><strong>类型2 数据库描述 (Database Description) </strong>分组，向邻站给出自己库中所有链路状态项目的摘要。</p></li>
<li><p><strong>类型3 链路状态请求 (Link State Request)</strong> 顾名思义</p></li>
<li><p><strong>类型4 链路状态更新 (Link State Update)</strong> 洪泛</p></li>
<li><p><strong>类型5 链路状态确认 (Link State Acknowledgement)</strong> 对更新分组的确认</p></li>
</ul>
<h5 id="外部网关协议-bgp">4.5.4 外部网关协议 BGP</h5>
<p>​ <strong>边界网关协议 BGP</strong>。不同自治系统之间使用 BGP 的缘由：</p>
<ul>
<li>互联网<strong>规模太大</strong>，使得自治系统 AS 之间路由选择非常困难。</li>
<li>自治系统 AS 之间的路由选择必须考虑有关策略。</li>
</ul>
<p>​ BGP 的目的寻找一条能够到达目的且网络条件比较好的路由而非最佳路由，采用<strong>路径向量 (path vector) 路由选择协议</strong>。每个自治系统至少选定一 <strong>BGP 发言人</strong>，往往选定<strong>边界路由器</strong>。发言人之间采用 BGP 协议。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main//newPath/image-20231120080108690.png" alt="image-20231120080108690" /><figcaption aria-hidden="true">image-20231120080108690</figcaption>
</figure>
<p>​ 在 RFC 4271 中规定了 BGP-4 的四种报文：</p>
<ul>
<li>OPEN 报文，用来与相邻 BGP 发言人建立关系，使其初始化。</li>
<li>UPDATE 报文，通告某一路由信息，以及列出要撤销的多路由。</li>
<li>KEEPALIVE 报文，周期性证实邻站连通信。</li>
<li>NOTIFICATION 报文，发送检测到的差错。</li>
</ul>
<p>​ BGP 报文格式：</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120080845868.png" alt="image-20231120080845868" /><figcaption aria-hidden="true">image-20231120080845868</figcaption>
</figure>
<p>​ 标记 (marker) 段 16 字节长，用于鉴别，不需鉴别是置全 1。</p>
<p>​ 长度字段指出包括首部在内整个 BGP 报文<strong>字节</strong>为单位的长度，最小 19，最大 4096。（查了下，是根据 TCP 协议的滑动窗口决定的 <a target="_blank" rel="noopener" href="https://zhidao.baidu.com/question/428983149?bd_page_type=0&amp;pu=&amp;init=middle">这里</a>)</p>
<p>​ UPDATE 和 OPEN 报文的格式暂时不赘述。</p>
<h5 id="路由器的构成">4.5.5 路由器的构成</h5>
<p>​ 路由器结构划分为两大部分：<strong>路由选择部分</strong>和<strong>分组转发部分</strong>。</p>
<p>​ 路由选择部分也称为<strong>控制部分</strong>，核心构建为选择处理机，任务是根据协议构造出路由表，同时不断更新维护路由表。</p>
<p>​ 分组转发部分有三部分组成：<strong>交换结构</strong>、一组<strong>输入端口</strong>和一组<strong>输出端口</strong>。</p>
<p>​ 交换结构 (switching fabric) 又称<strong>交换组织</strong>，作用是根据转发表处理分组，把输入的分组从魔偶个端口输出出去。</p>
<p>​ 为了使交换功能分散化，往往把复制到转发表放在每个输入端口中，称为<strong>"影子副本"</strong>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120083022304.png" alt="image-20231120083022304" /><figcaption aria-hidden="true">image-20231120083022304</figcaption>
</figure>
<p>​ 最早使用的路由器是普通的计算机，采用 CPU 作为路由选择处理机，利用中断机制启动处理。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120083350315.png" alt="image-20231120083350315" /><figcaption aria-hidden="true">image-20231120083350315</figcaption>
</figure>
<h4 id="ipv6">4.6 IPv6</h4>
<p>​ 变化：</p>
<ul>
<li><strong>允许协议继续扩充</strong>。</li>
<li>灵活的首部格式</li>
<li>扩展的地址层次结构</li>
</ul>
<p>​ IPv6 数据报有 <strong>基本首部</strong>和<strong>有效载荷</strong>两部分组成，有效载荷也成为<strong>净载荷</strong>。有效载荷允许零个或多个<strong>扩展首部</strong>。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120083649979.png" alt="image-20231120083649979" /><figcaption aria-hidden="true">image-20231120083649979</figcaption>
</figure>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120083714488.png" alt="image-20231120083714488" /><figcaption aria-hidden="true">image-20231120083714488</figcaption>
</figure>
<ul>
<li><strong>通信量类：</strong> 8 位，区分不同 IPv6 数据报类别或优先级。</li>
<li>流标号 (traffic class)：20 位。</li>
<li>有效载荷长度：除基本首部外的字节数。</li>
</ul>
<p>​ 扩展首部在传输中不进行处理，交给两端计算机处理，大大提高路由器处理效率。</p>
<p>​ IPv6 增加了任播 (anycast) 地址，终点是一组计算机，但数据报只交付其中一个，通常是最接近一个。</p>
<p>​ IPv6 采用<strong>冒号十六进制记法</strong>，如 <span class="math display">\[
68E6:8C64:FFFF:FFFF:0:1180:960A:FFFF
\]</span></p>
<ul>
<li>允许省略前导 0。</li>
<li>可以将一串连续的 0 用一对冒号取代。</li>
<li>仅允许一次零压缩。</li>
<li>仍可采用 CDR 斜线表示法。</li>
</ul>
<p>​ 地址分类：</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120084419498.png" alt="image-20231120084419498" /><figcaption aria-hidden="true">image-20231120084419498</figcaption>
</figure>
<h5 id="ipv4-向-ipv6-过渡">4.6.3 IPv4 向 IPv6 过渡</h5>
<p>​ 策略一：<strong>双协议栈</strong>。装有双协议栈的主机或路由器既能与 IPv4 主机通信，又能与 IPv6 主机通信。根据域名系统 DNS 返回的地址类型确定主机使用的地址类型。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120103834796.png" alt="image-20231120103834796" /><figcaption aria-hidden="true">image-20231120103834796</figcaption>
</figure>
<p>​ 策略二：<strong>隧道技术</strong>。IPv6 数据报进入 IPv4 网络时，把 IPv6 数据报封装成 IPv4 数据报。要使得双协议栈主机知道 IPv4 数据报内封装的时 IPv6 数据报，则需要将 IPv4 首部的协议字段值设置为 41。</p>
<h5 id="icmpv6">4.6.4 ICMPv6</h5>
<p>​ IPv6 也不保证数据可靠交付，因此采用 ICMP 来反馈差错。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120104137961.png" alt="image-20231120104137961" /><figcaption aria-hidden="true">image-20231120104137961</figcaption>
</figure>
<h4 id="ip-多播">4.7 IP 多播</h4>
<p>​ 与单播相比，一对多的网络通信中，多播可大大节约网络资源。</p>
<p>​ 多播组的标识符是 IP 地址中的 D 类地址，范围是 224.0.0.0 到 239.255.255.255。多播地址只能用于目的地址而不能用于源地址。一个 D 类地址表示一个多播组。</p>
<h5 id="网际组管理协-igmp-和-多播路由选择协议">4.7.3 网际组管理协 IGMP 和 多播路由选择协议</h5>
<p>​ IGMP (Internet Group Management Protocol) 网际组管理协议：是让连接在本地局域网上的多播路由器知道本局域网上<strong>是否</strong>有主机参加或退出了某个多播组。</p>
<p>​ 多播路由选择协议：多播转发必须动态适应多播组成员的变化，在转发数据报时，不能仅仅根据数据报中的目的地址，而是考虑从什么地方来到什么地方去。</p>
<p>​ IGMP 属于整个网际协议 IP 的一个组成部分。</p>
<p>​ 多播路由选择协议：洪泛与剪除、隧道技术、基于核心的发现技术。</p>
<h4 id="虚拟专用网-vpn-和网络地址转换-nat">4.8 虚拟专用网 VPN 和网络地址转换 NAT</h4>
<h5 id="vpn">4.8.1 VPN</h5>
<p>​ RFC 1918 指明了一些<strong>专用地址</strong>，只用于机构内部通信，互联网中所有路由器对目的地址为专用地址的数据报一律不予转发。</p>
<p>​ VPN 的作用是对内部数据报进行加密，然后在公网上传输，使得效果跟内网通信一样。</p>
<p><img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120142854286.png" /></p>
<h5 id="nat">4.8.2 NAT</h5>
<p>​ 已经分配到本地 IP 地址，又想进行全球通信，则可使用 NAT。NAT 将每台计算机映射到 NAT 路由器的一个端口（每个端口具有一个全球 IP 地址），由此便可进行互联网通讯，此时目的主机只能知道 NAT 路由器端口的地址而不知发送端的地址。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120142901992.png" alt="image-20231120142901992" /><figcaption aria-hidden="true">image-20231120142901992</figcaption>
</figure>
<h4 id="mlps">4.9 MLPS</h4>
<p>​ MLPS 作为一种 IP 增强技术，广泛应用在互联网中。特点如下：</p>
<ul>
<li>支持面向连接的服务质量。</li>
<li>支持流量工程，平衡网络负载。</li>
<li>有效地支持 VPN。</li>
</ul>
<h5 id="工作原理">4.9.1 工作原理</h5>
<p>​ 在 MPLS 域入口处打上固定长的 MPLS 标记，然后对打上标记的 IP 数据报用硬件转发，只经过第二层，称为<strong>标记交换</strong>。</p>
<p>​ MPLS 域是指该域中有许多彼此相邻路由器，且均为支持 MPLS 技术的<strong>标记路由器 LSR</strong>。一个标记仅在两个 LSR 间才有意义。</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120143602027.png" alt="image-20231120143602027" /><figcaption aria-hidden="true">image-20231120143602027</figcaption>
</figure>
<p>​ 如入接口 0 收到一个标记为 3 的 IP 数据报，路由器就知道应从出接口 1 转发且打上标记 1。</p>
<h5 id="转发等价类-fec">4.9.2 转发等价类 FEC</h5>
<p>​ IP 数据报的集合，对路由器来说具有相同的性质，如下一跳，相同服务类别，同样丢弃优先级等。</p>
<p>​ 例子：</p>
<ul>
<li>目的 IP 与某一特定 IP 地址前缀匹配的 IP 数据报</li>
<li>所有源地址与目的地址相同的数据报</li>
<li>具有某种服务质量需求的数据报</li>
</ul>
<h5 id="mpls-首部的格式">4.9.3 MPLS 首部的格式</h5>
<p>​</p>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120144102987.png" alt="image-20231120144102987" /><figcaption aria-hidden="true">image-20231120144102987</figcaption>
</figure>
<figure>
<img src="https://raw.githubusercontent.com/mlger/Pict/main/newPath/image-20231120144109443.png" alt="image-20231120144109443" /><figcaption aria-hidden="true">image-20231120144109443</figcaption>
</figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Lg"
      src="https://cdn.luogu.com.cn/upload/image_hosting/oti64lgi.png">
  <p class="site-author-name" itemprop="name">Lg</p>
  <div class="site-description" itemprop="description">青春无悔不死</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友链
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://zjy1412.github.io/" title="https:&#x2F;&#x2F;zjy1412.github.io" rel="noopener" target="_blank">耀耀</a>
        </li>
    </ul>
  </div>

      </div>

      
      <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
      <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
      <div class="widget-wrap">
          <div id="myCanvasContainer" class="widget tagcloud">
              <canvas width="250" height="250" id="resCanvas" style="width:100%">
                  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%93%E4%B8%9A%E8%AF%BE/" rel="tag">专业课</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%97%E6%AD%8C/" rel="tag">诗歌</a><span class="tag-list-count">4</span></li></ul>
              </canvas>
          </div>
      </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2023-06 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lg</span>
</div>
  <div class="powered-by">
    <!--由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动 -->
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
//    window.MathJax = {
//      loader: {
//
//        source: {//
//          '[tex]/amsCd': '[tex]/amscd',
//          '[tex]/AMScd': '[tex]/amscd'
//        }
//      },
//      tex: {//
//        inlineMath: {'[+]': [['$', '$']]},
//
//        tags: 'ams'
//      },
//      options: {
//        renderActions: {
//          findScript: [10, doc => {
//            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
//              const display = !!node.type.match(/; *mode=display/);
//              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
//              const text = document.createTextNode('');
//              node.parentNode.replaceChild(text, node);
//              math.start = {node: text, delim: '', n: 0};
//              math.end = {node: text, delim: '', n: 0};
//              doc.math.push(math);
//            });
//          }, '', false],
//          insertedScript: [200, () => {
//            document.querySelectorAll('mjx-container').forEach(node => {
//              let target = node.parentNode;
//              if (target.nodeName.toLowerCase() === 'li') {
//                target.parentNode.classList.add('has-jax');
//              }
//            });
//          }, '', false]
//        }
//      }
//    };
    window.MathJax = {
      tex2jax: {
        inlineMath: [ ['$$','$$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
